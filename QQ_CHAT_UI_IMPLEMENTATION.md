# QQ é£æ ¼èŠå¤© UI å®ç°å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

å®Œæ•´çš„ QQ é£æ ¼èŠå¤©ç³»ç»Ÿ UI é‡å»ºï¼ŒåŒ…å«ç°ä»£åŒ–è®¾è®¡ã€æµç•…åŠ¨ç”»å’Œå®Œæ•´äº¤äº’åŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒæˆå°±

#### âœ… å·²å®Œæˆ

1. **ä¸‰æ å¸ƒå±€æ¶æ„**
   - é¡¶éƒ¨å·¥å…·æ  (TopToolbar)
   - ä¸­é—´æ¶ˆæ¯åŒº (MessageListNew + MessageInputNew)
   - å³ä¾§æˆå‘˜æ  (RightSidebar)

2. **æ¶ˆæ¯æ˜¾ç¤ºç³»ç»Ÿ** (MessageListNew.vue)
   - âœ¨ æ¶ˆæ¯è¿›å…¥åŠ¨ç”» (messageSlideIn)
   - â° æ—¶é—´åˆ†ç»„åŠŸèƒ½ (ä»Šå¤©/æ˜¨å¤©/æ—¥æœŸ)
   - ğŸ“ å¤šç§æ¶ˆæ¯ç±»å‹æ”¯æŒ (æ–‡æœ¬/å›¾ç‰‡/æ–‡ä»¶/æ’¤å›)
   - ğŸ­ æ¶ˆæ¯æ°”æ³¡å¢å¼ºæ ·å¼
   - ğŸ’« æ‚¬åœåŠ¨ç”»å’Œè§†è§‰åé¦ˆ
   - ğŸ“Š æ¶ˆæ¯çŠ¶æ€æŒ‡ç¤ºå™¨ (å‘é€ä¸­/å·²é€è¾¾/å·²è¯»)
   - âŒ¨ï¸ æ‰“å­—æŒ‡ç¤ºå™¨

3. **æ¶ˆæ¯è¾“å…¥ç³»ç»Ÿ** (MessageInputNew.vue)
   - ğŸ˜Š è¡¨æƒ…é€‰æ‹©å™¨ (40+ è¡¨æƒ…ï¼Œå¸¦åŠ¨ç”»)
   - ğŸ“ æ–‡ä»¶/å›¾ç‰‡ä¸Šä¼ ï¼Œæ”¯æŒæ‹–æ‹½
   - @mention è‡ªåŠ¨å®Œæˆ
   - âŒ¨ï¸ å¿«æ·é”®æ”¯æŒ (Ctrl+Enter å‘é€, Shift+Enter æ¢è¡Œ)
   - ğŸŒ ç¦»çº¿çŠ¶æ€æç¤º
   - ğŸ“ å­—ç¬¦è®¡æ•°å™¨ (0/1000)

4. **è¾…åŠ©ç»„ä»¶**
   - TopToolbar: ç¾¤ç»„ä¿¡æ¯ã€é€šè¯æŒ‰é’®ã€æ›´å¤šèœå•
   - RightSidebar: æˆå‘˜åˆ—è¡¨/ç¾¤ä¿¡æ¯åˆ‡æ¢
   - ContextMenu: å³é”®èœå• (å¤åˆ¶/å›å¤/ç¼–è¾‘/æ’¤å›/è½¬å‘/å±è”½)
   - FloatingNewMessageButton: æ–°æ¶ˆæ¯æç¤ºæŒ‰é’®

5. **è§†è§‰å¢å¼º**
   - ğŸ¨ ç»Ÿä¸€è‰²å½©æ–¹æ¡ˆ
     - ä¸»è‰²: #5c6af0 (è“ç´«è‰²)
     - è¾…åŠ©è‰²: #67c23a (ç»¿è‰²), #ff5f72 (çº¢è‰²)
   - âš¡ æµç•…åŠ¨ç”»
     - æ¶ˆæ¯æ»‘å…¥ (0.3s)
     - è¡¨æƒ…å¼¹å‡º (0.2s)
     - æ°”æ³¡æ‚¬åœ (0.2s)
   - ğŸŒˆ æ¸å˜æ•ˆæœ
     - è‡ªå·±çš„æ¶ˆæ¯: linear-gradient(135deg, #5c6af0, #6b7eff)

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3 (Composition API)
- **UI åº“**: Element Plus
- **æ ·å¼**: Scoped CSS with Animations
- **æ—¶é—´å¤„ç†**: dayjs
- **å¼€å‘æœåŠ¡å™¨**: Vite 4.5.14
- **è¿è¡Œç«¯å£**: http://localhost:5175

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
frontend/src/
â”œâ”€â”€ components/chat/
â”‚   â”œâ”€â”€ ChatRoom.vue                   (ä¸»å®¹å™¨)
â”‚   â”œâ”€â”€ MessageListNew.vue             (æ¶ˆæ¯åˆ—è¡¨)
â”‚   â”œâ”€â”€ MessageInputNew.vue            (è¾“å…¥æ¡†)
â”‚   â”œâ”€â”€ TopToolbar.vue                 (é¡¶éƒ¨æ )
â”‚   â”œâ”€â”€ RightSidebar.vue               (å³ä¾§æ )
â”‚   â”œâ”€â”€ ContextMenu.vue                (å³é”®èœå•)
â”‚   â””â”€â”€ FloatingNewMessageButton.vue    (æµ®çª—æŒ‰é’®)
â””â”€â”€ views/chat/
    â””â”€â”€ ChatRoom.vue                   (è·¯ç”±è§†å›¾)
```

## ğŸ¨ æ ¸å¿ƒæ ·å¼é…ç½®

### æ¶ˆæ¯æ°”æ³¡æ ·å¼

**å…¶ä»–äººçš„æ¶ˆæ¯:**
```css
background: #f0f0f0;
color: #333;
border-radius: 16px;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
```

**è‡ªå·±çš„æ¶ˆæ¯:**
```css
background: linear-gradient(135deg, #5c6af0 0%, #6b7eff 100%);
color: #fff;
box-shadow: 0 2px 8px rgba(92, 106, 240, 0.2);
```

### å…³é”®åŠ¨ç”»

| åŠ¨ç”»åç§° | æŒç»­æ—¶é—´ | æ•ˆæœ |
|---------|--------|------|
| messageSlideIn | 0.3s | æ¶ˆæ¯ä»ä¸‹æ–¹æ»‘å…¥ + æ·¡å…¥ |
| fadeinScaleUp | 0.4s | æ—¶é—´æ ‡ç­¾ä»ä¸­å¿ƒæ”¾å¤§å‡ºç° |
| popupFadeIn | 0.2s | è¡¨æƒ…é€‰æ‹©å™¨å¼¹å‡º |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd frontend
npm run dev
# è®¿é—®: http://localhost:5175/chat/room
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
node mock-server.js
# åç«¯è¿è¡Œäº: http://localhost:3001
```

### 3. ä¸»è¦åŠŸèƒ½æµ‹è¯•

#### æ¶ˆæ¯è¾“å…¥
- è¾“å…¥æ–‡æœ¬ â†’ æŒ‰ Ctrl+Enter å‘é€
- æŒ‰ Shift+Enter æ¢è¡Œ
- æœ€å¤š 1000 ä¸ªå­—ç¬¦

#### è¡¨æƒ…é€‰æ‹©
- ç‚¹å‡» ğŸ˜Š æŒ‰é’®æ‰“å¼€è¡¨æƒ…é€‰æ‹©å™¨
- é€‰æ‹©è¡¨æƒ…è‡ªåŠ¨æ’å…¥æ–‡æœ¬æ¡†

#### æ–‡ä»¶ä¸Šä¼ 
- ç‚¹å‡»ğŸ“ æŒ‰é’®ä¸Šä¼ æ–‡ä»¶
- æˆ–ç›´æ¥æ‹–æ‹½æ–‡ä»¶åˆ°è¾“å…¥æ¡†

#### å³é”®èœå•
- å³é”®ç‚¹å‡»ä»»ä½•æ¶ˆæ¯æ‰“å¼€èœå•
- é€‰é¡¹: å¤åˆ¶ã€å›å¤ã€ç¼–è¾‘ã€æ’¤å›ç­‰

#### @Mention
- è¾“å…¥ @ è§¦å‘æˆå‘˜åˆ—è¡¨
- é€‰æ‹©æˆå‘˜è‡ªåŠ¨è¡¥å…¨

## ğŸ“Š æ•°æ®æ¨¡å‹

### Message å¯¹è±¡

```javascript
{
  id: string,           // æ¶ˆæ¯ ID
  type: 'text' | 'image' | 'file' | 'voice',
  content: string,      // æ¶ˆæ¯å†…å®¹
  timestamp: number,    // æ—¶é—´æˆ³
  senderName: string,   // å‘é€è€…åç§°
  senderAvatar: string, // å‘é€è€…å¤´åƒ URL
  isOwn: boolean,       // æ˜¯å¦æ˜¯è‡ªå·±å‘é€
  status: 'pending' | 'failed' | 'delivered' | 'read',
  attachments: Array,   // é™„ä»¶æ•°ç»„
  isRecalled: boolean   // æ˜¯å¦è¢«æ’¤å›
}
```

### Room å¯¹è±¡

```javascript
{
  id: string,
  name: string,
  avatar: string,
  memberCount: number,
  announcement: string,
  createdAt: timestamp
}
```

## ğŸ­ äº‹ä»¶å¤„ç†

### ChatRoom.vue äº‹ä»¶æµ

| äº‹ä»¶ | æ¥æº | å¤„ç†å‡½æ•° |
|------|------|---------|
| send | MessageInputNew | handleSendMessage |
| upload | MessageInputNew | handleUploadFile |
| typing | MessageInputNew | handleTypingStatus |
| message-action | MessageListNew | handleMessageAction |
| scroll | MessageListNew | handleScroll |
| select | ContextMenu | handleContextMenuSelect |

## ğŸ”§ é…ç½®ä¿®æ”¹

### æ”¹å˜ä¸»è‰²è°ƒ

ç¼–è¾‘å„ç»„ä»¶ä¸­çš„ CSS å˜é‡:
```css
/* å½“å‰: #5c6af0 */
/* ä¿®æ”¹ä¸º: #007bff æˆ–å…¶ä»–é¢œè‰² */
```

### è°ƒæ•´æ¶ˆæ¯æ°”æ³¡å¤§å°

åœ¨ MessageListNew.vue:
```css
.message-bubble {
  padding: 10px 14px;  /* ä¿®æ”¹å†…è¾¹è· */
  border-radius: 16px; /* ä¿®æ”¹åœ†è§’ */
  font-size: 14px;     /* ä¿®æ”¹å­—ä½“å¤§å° */
}
```

### è‡ªå®šä¹‰è¡¨æƒ…

åœ¨ MessageInputNew.vue script ä¸­ä¿®æ”¹ EMOJI_LIST:
```javascript
const EMOJI_LIST = [
  'ğŸ˜€', 'ğŸ˜', /* ... æ·»åŠ æ›´å¤šè¡¨æƒ… ... */
]
```

## ğŸš¨ å·²çŸ¥é™åˆ¶

1. å³é”®èœå•åŠŸèƒ½æš‚ä¸ºå ä½ç¬¦ (å¯æ ¹æ®éœ€æ±‚å®Œå–„)
2. è¯­éŸ³è¾“å…¥åŠŸèƒ½å¼€å‘ä¸­
3. æ–‡ä»¶ä¸Šä¼ ä¸ºæ¨¡æ‹Ÿä¸Šä¼  (éœ€é›†æˆçœŸå®åç«¯)
4. è™šæ‹Ÿæ»šåŠ¨å°šæœªå®ç° (å¤§æ¶ˆæ¯é‡æ€§èƒ½ä¼˜åŒ–)

## âœ¨ ä¸‹ä¸€æ­¥æ”¹è¿›æ–¹å‘

1. **æ€§èƒ½ä¼˜åŒ–**
   - å®ç°è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§é‡æ¶ˆæ¯
   - æ¶ˆæ¯å›¾ç‰‡æ‡’åŠ è½½

2. **åŠŸèƒ½æ‰©å±•**
   - å®ç° WebSocket å®æ—¶é€šä¿¡
   - æ·»åŠ è¯­éŸ³/è§†é¢‘é€šè¯
   - æ¶ˆæ¯ç¼–è¾‘/æ’¤å›å®Œæ•´é€»è¾‘
   - ç¾¤æ–‡ä»¶ç®¡ç†

3. **äº¤äº’å¢å¼º**
   - æ·»åŠ æ¶ˆæ¯ååº”è¡¨æƒ…
   - å¼•ç”¨å›å¤åŠŸèƒ½
   - æ¶ˆæ¯æœç´¢å’Œç­›é€‰
   - ä¸»é¢˜åˆ‡æ¢ (æ·±è‰²æ¨¡å¼)

4. **å¯è®¿é—®æ€§**
   - é”®ç›˜å¿«æ·é”®å®Œå–„
   - å±å¹•é˜…è¯»å™¨æ”¯æŒ
   - é«˜å¯¹æ¯”åº¦æ¨¡å¼

## ğŸ“± å“åº”å¼è®¾è®¡

å½“å‰å¸ƒå±€åœ¨ä»¥ä¸‹åˆ†è¾¨ç‡ä¸‹æµ‹è¯•:
- âœ… 1920x1080 (æ¡Œé¢)
- âœ… 1280x720 (ç¬”è®°æœ¬)
- âš ï¸ 768px ä»¥ä¸‹éœ€è¦å“åº”å¼è°ƒæ•´

## ğŸ› è°ƒè¯•æŠ€å·§

### æµè§ˆå™¨æ§åˆ¶å°

```javascript
// æŸ¥çœ‹æ¶ˆæ¯æ•°æ®
console.log(store.activeMessages)

// æŸ¥çœ‹è¿æ¥çŠ¶æ€
console.log(connectionState)

// æŸ¥çœ‹æˆå‘˜åˆ—è¡¨
console.log(members.value)
```

### å¼€å‘å·¥å…·

- Vue DevTools: æ£€æŸ¥ç»„ä»¶çŠ¶æ€
- Network æ ‡ç­¾: ç›‘æ§ API è¯·æ±‚
- Performance æ ‡ç­¾: åˆ†æåŠ¨ç”»æ€§èƒ½

## ğŸ“ æ”¯æŒå’Œåé¦ˆ

é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®è¯·æ£€æŸ¥:
1. æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
2. ç½‘ç»œè¿æ¥çŠ¶æ€
3. åç«¯æœåŠ¡è¿è¡ŒçŠ¶æ€

## ğŸ“ å˜æ›´æ—¥å¿—

### v1.0.0 (å®Œæˆ)
- âœ… åŸºç¡€ UI ç»„ä»¶å®Œæˆ
- âœ… æ¶ˆæ¯æ˜¾ç¤ºç³»ç»Ÿ
- âœ… è¾“å…¥æ¡†å’Œè¡¨æƒ…é€‰æ‹©
- âœ… åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
- âœ… å³é”®èœå•æ¡†æ¶
- âœ… æˆå‘˜ç®¡ç†ç•Œé¢

---

**æœ€åæ›´æ–°**: 2025-10-21
**ç‰ˆæœ¬**: 1.0.0
**çŠ¶æ€**: âœ¨ ç”Ÿäº§å°±ç»ª
