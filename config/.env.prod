# AI面试系统 - Docker 生产环境配置
# ====================================
# 重要: 在生产环境中更改所有敏感信息!

# ============ 应用配置 ============
APP_NAME=AI面试系统
APP_VERSION=1.0.0
APP_ENV=production
COMPOSE_PROJECT_NAME=interview-system

# ============ 端口配置 ============
# 注意: 在Docker中，前端和后端通过内部网络通信
FRONTEND_PORT=80
FRONTEND_HTTPS_PORT=443
BACKEND_PORT=8080
STORAGE_PORT=8081
REDIS_PORT=6379
DB_PORT=5432

# ============ 数据库配置 ============
DB_HOST=interview-db
DB_PORT=5432
DB_NAME=interview_system
DB_USER=admin
DB_PASSWORD=SecurePassword123!Change@This

# ============ Redis配置 ============
REDIS_HOST=interview-redis
REDIS_PORT=6379
REDIS_PASSWORD=RedisPassword123!Change@This
REDIS_DB=0

# ============ 后端API配置 ============
# 容器内网络地址
VITE_API_BASE_URL=http://interview-backend:3001/api
VITE_STORAGE_API_BASE_URL=http://interview-storage:8081/api

# 容器外访问地址 (可选，用于浏览器直接访问)
# API_BASE_URL_EXTERNAL=https://yourdomain.com/api
# STORAGE_API_BASE_URL_EXTERNAL=https://yourdomain.com/storage

# ============ Dify AI配置 (必须配置) ============
# 从 https://dify.ai 获取
DIFY_API_KEY=app-your-api-key-here
DIFY_API_BASE_URL=https://api.dify.ai/v1
DIFY_WORKFLOW_URL=https://udify.app/workflow/your-workflow-id
DIFY_WORKFLOW_SCORE_ID=your-score-workflow-id
DIFY_WORKFLOW_GENERATE_ID=your-generate-workflow-id

# ============ 存储服务配置 ============
SESSION_STORAGE_API_KEY=ak_live_a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0

# ============ 安全配置 (生产环境必须修改) ============
JWT_SECRET=interview-system-jwt-secret-key-change-in-production-environment-use-strong-secret
JWT_EXPIRATION=86400000

# ============ 性能配置 ============
MAX_UPLOAD_SIZE=10MB
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX=100

# ============ 日志配置 ============
LOG_LEVEL=INFO
LOG_DIR=/app/logs

# ============ 时区配置 ============
TZ=Asia/Shanghai

# ============ 监控配置 ============
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=5

# ============ Grafana配置 (可选) ============
GRAFANA_PASSWORD=admin123Change@This

# ============ Prometheus配置 ============
PROMETHEUS_RETENTION=15d
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s

# ============ 邮件配置 (可选) ============
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-password
# MAIL_FROM=noreply@yourdomain.com

# ============ 域名配置 ============
# DOMAIN=yourdomain.com
# DOMAIN_PROTOCOL=https

# ============ SSL证书配置 ============
# SSL_ENABLED=true
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ============ 备份配置 ============
BACKUP_ENABLED=true
BACKUP_CRON=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ============ 缓存配置 ============
CACHE_ENABLED=true
CACHE_TTL=3600
