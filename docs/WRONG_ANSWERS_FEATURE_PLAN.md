# é”™é¢˜é›†åŠŸèƒ½å®ç°æ–¹æ¡ˆ

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

åœ¨ `/home` é¡µé¢é›†æˆé”™é¢˜é›†åŠŸèƒ½ï¼Œè¿æ¥ **AI æ¨¡æ‹Ÿé¢è¯•** å’Œ **é¢˜åº“ç»ƒä¹ ** çš„é”™é¢˜æ•°æ®ï¼Œæä¾›ç»Ÿä¸€çš„é”™é¢˜ç®¡ç†å’Œå¤ä¹ ä½“éªŒã€‚

---

## äºŒã€ç³»ç»Ÿæ¶æ„è®¾è®¡

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Home Page é¦–é¡µ                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ é”™é¢˜é›†    â”‚  â”‚ ç»Ÿè®¡æ¦‚è§ˆ  â”‚  â”‚ å¿«é€Ÿè·³è½¬â”‚ â”‚
â”‚  â”‚ é¢æ¿      â”‚  â”‚ å¡ç‰‡      â”‚  â”‚ èœå•    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â”‚
â”‚       â”‚             â”‚              â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚              â”‚
        â–¼             â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Wrong Answers Service (é”™é¢˜æœåŠ¡)   â”‚
   â”‚                                      â”‚
   â”‚  â€¢ æ•°æ®èšåˆï¼ˆAI + é¢˜åº“ï¼‰              â”‚
   â”‚  â€¢ é”™é¢˜ç»Ÿè®¡                          â”‚
   â”‚  â€¢ é”™é¢˜åˆ†ç±»                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
        â–¼       â–¼       â–¼
    â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚ AI  â”‚ â”‚ é¢˜åº“  â”‚ â”‚ æœ¬åœ°  â”‚
    â”‚ æ¥å£ â”‚ â”‚ æ¥å£ â”‚ â”‚ å­˜å‚¨  â”‚
    â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒæ¨¡å—

#### 2.2.1 å‰ç«¯ç»„ä»¶å±‚æ¬¡

```
Home.vue (é¦–é¡µ)
â”œâ”€â”€ WrongAnswersOverview.vue (é”™é¢˜é›†æ¦‚è§ˆ)
â”‚   â”œâ”€â”€ WrongAnswersStatistics.vue (ç»Ÿè®¡ä¿¡æ¯)
â”‚   â”‚   â”œâ”€â”€ æ€»é”™é¢˜æ•°
â”‚   â”‚   â”œâ”€â”€ é”™é¢˜æ¥æºåˆ†å¸ƒ (AI é¢è¯• vs é¢˜åº“)
â”‚   â”‚   â”œâ”€â”€ é”™è¯¯çŸ¥è¯†ç‚¹æ’è¡Œ
â”‚   â”‚   â””â”€â”€ é”™é¢˜å¤ä¹ è¿›åº¦
â”‚   â”œâ”€â”€ WrongAnswersList.vue (é”™é¢˜åˆ—è¡¨)
â”‚   â”‚   â”œâ”€â”€ é”™é¢˜å¡ç‰‡ (æ”¯æŒå±•å¼€/æ”¶èµ·)
â”‚   â”‚   â”œâ”€â”€ åˆ†ç±»ç­›é€‰ (æ¥æºã€çŸ¥è¯†ç‚¹ã€éš¾åº¦)
â”‚   â”‚   â”œâ”€â”€ æ’åºé€‰é¡¹ (æœ€æ–°ã€æœ€å¤šé”™ã€æœªå¤ä¹ )
â”‚   â”‚   â””â”€â”€ åˆ†é¡µ/è™šæ‹Ÿæ»šåŠ¨
â”‚   â””â”€â”€ WrongAnswersActions.vue (å¿«é€Ÿæ“ä½œ)
â”‚       â”œâ”€â”€ å¤ä¹ è®¡åˆ’è·³è½¬
â”‚       â”œâ”€â”€ ç›¸ä¼¼é¢˜æ¨è
â”‚       â””â”€â”€ å¯¼å‡º/åˆ†äº«
```

---

## ä¸‰ã€æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 é”™é¢˜è®°å½•ç»“æ„

```typescript
// é€šç”¨é”™é¢˜å¯¹è±¡
interface WrongAnswerRecord {
  id: string;                    // å”¯ä¸€æ ‡è¯†
  source: 'ai_interview' | 'question_bank';  // é”™é¢˜æ¥æº
  sourceId: string;              // æº ID (AI é¢è¯• ID æˆ–é¢˜åº“é¢˜ç›® ID)

  // é¢˜ç›®ä¿¡æ¯
  questionId: string;
  questionContent: string;
  questionType: string;          // å•é€‰ã€å¤šé€‰ã€ç®€ç­”ç­‰
  questionDifficulty: number;    // 1-5
  knowledgePoints: string[];     // å…³è”çŸ¥è¯†ç‚¹

  // ç”¨æˆ·ç­”æ¡ˆ
  userAnswer: string;
  correctAnswer: string;
  answerAnalysis: string;        // è§£æ

  // é”™é¢˜ç»Ÿè®¡
  wrongCount: number;            // é”™è¯¯æ¬¡æ•°
  correctCount: number;          // æ­£ç¡®æ¬¡æ•°
  lastWrongTime: number;         // æœ€åé”™è¯¯æ—¶é—´æˆ³
  createdTime: number;           // é¦–æ¬¡è®°å½•æ—¶é—´æˆ³

  // ç”¨æˆ·æ ‡è®°
  tags: string[];                // è‡ªå®šä¹‰æ ‡ç­¾
  notes: string;                 // ç”¨æˆ·ç¬”è®°
  reviewedStatus: 'unreviewed' | 'reviewing' | 'mastered';

  // æ‰©å±•ä¿¡æ¯
  metadata?: {
    aiSessionId?: string;        // AI é¢è¯•ä¼šè¯ ID
    examName?: string;           // è€ƒè¯•åç§°
    timeSpent?: number;          // ç­”é¢˜è€—æ—¶ (æ¯«ç§’)
  }
}

// AI é¢è¯•é”™é¢˜æ˜ å°„
interface AIInterviewWrongAnswer extends WrongAnswerRecord {
  source: 'ai_interview';
  metadata: {
    aiSessionId: string;
    aiSessionName: string;
    questionSequence: number;    // è¯¥é¢˜åœ¨é¢è¯•ä¸­çš„åºå·
  }
}

// é¢˜åº“é”™é¢˜æ˜ å°„
interface QuestionBankWrongAnswer extends WrongAnswerRecord {
  source: 'question_bank';
  metadata: {
    bankId: string;
    chapterId: string;
    examType?: string;           // æ¨¡æ‹Ÿè€ƒã€ä¸“é¡¹è®­ç»ƒç­‰
  }
}
```

### 3.2 ç»Ÿè®¡æ•°æ®ç»“æ„

```typescript
interface WrongAnswersStatistics {
  totalWrongCount: number;              // æ€»é”™é¢˜æ•°

  sourceDistribution: {
    aiInterview: number;                // AI é¢è¯•é”™é¢˜æ•°
    questionBank: number;               // é¢˜åº“é”™é¢˜æ•°
  };

  difficultyDistribution: {
    [key: number]: number;              // éš¾åº¦åˆ†å¸ƒ
  };

  topWrongKnowledgePoints: Array<{
    name: string;
    wrongCount: number;
    percentage: number;
  }>;

  reviewProgress: {
    unreviewed: number;
    reviewing: number;
    mastered: number;
  };

  mostWrongQuestions: WrongAnswerRecord[];  // Top 5 æœ€å¸¸é”™çš„é¢˜ç›®
}
```

---

## å››ã€åç«¯ API è®¾è®¡

### 4.1 API ç«¯ç‚¹

```
GET    /api/wrong-answers/statistics          # è·å–é”™é¢˜ç»Ÿè®¡
GET    /api/wrong-answers/list                # è·å–é”™é¢˜åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ’åº)
GET    /api/wrong-answers/:id                 # è·å–å•ä¸ªé”™é¢˜è¯¦æƒ…
POST   /api/wrong-answers                     # è®°å½•æ–°é”™é¢˜
PUT    /api/wrong-answers/:id                 # æ›´æ–°é”™é¢˜ (æ ‡ç­¾ã€ç¬”è®°ã€å¤ä¹ çŠ¶æ€)
DELETE /api/wrong-answers/:id                 # åˆ é™¤é”™é¢˜è®°å½•

POST   /api/wrong-answers/:id/review          # æ ‡è®°ä¸ºå·²å¤ä¹ 
POST   /api/wrong-answers/batch-review        # æ‰¹é‡æ ‡è®°ä¸ºå·²å¤ä¹ 

GET    /api/wrong-answers/export              # å¯¼å‡ºé”™é¢˜åˆ—è¡¨
GET    /api/wrong-answers/recommendations    # è·å–ç›¸ä¼¼é¢˜æ¨è
```

### 4.2 API è¯·æ±‚/å“åº”ç¤ºä¾‹

```typescript
// è·å–é”™é¢˜åˆ—è¡¨
GET /api/wrong-answers/list?page=1&pageSize=10&source=all&sortBy=lastWrongTime

Response: {
  code: 0,
  data: {
    total: 42,
    items: [
      {
        id: "wa_001",
        source: "ai_interview",
        questionContent: "ä»€ä¹ˆæ˜¯ RESTful API?",
        wrongCount: 3,
        lastWrongTime: 1697798400000,
        reviewedStatus: "unreviewed",
        // ... å…¶ä»–å­—æ®µ
      }
    ]
  }
}

// è®°å½•æ–°é”™é¢˜
POST /api/wrong-answers
{
  source: "ai_interview",
  sourceId: "ai_session_123",
  questionId: "q_456",
  questionContent: "...",
  userAnswer: "...",
  correctAnswer: "...",
  metadata: {
    aiSessionId: "ai_session_123"
  }
}

Response: {
  code: 0,
  data: {
    id: "wa_001",
    // ... è¿”å›å®Œæ•´é”™é¢˜è®°å½•
  }
}
```

---

## äº”ã€å‰ç«¯å®ç°æ–¹æ¡ˆ

### 5.1 Composable ç»„ç»‡ç»“æ„

```typescript
// composables/useWrongAnswers.ts
export function useWrongAnswers() {
  // é”™é¢˜æ•°æ®ç®¡ç†
  const wrongAnswers = ref<WrongAnswerRecord[]>([])
  const statistics = ref<WrongAnswersStatistics | null>(null)
  const loading = ref(false)

  // ç­›é€‰å’Œæ’åº
  const filters = reactive({
    source: 'all',           // all | ai_interview | question_bank
    difficulty: [],          // []è¡¨ç¤ºæ‰€æœ‰éš¾åº¦
    knowledgePoint: '',
    reviewStatus: 'all',     // all | unreviewed | reviewing | mastered
    searchKeyword: ''
  })

  const sortBy = ref<'lastWrongTime' | 'wrongCount' | 'createdTime'>('lastWrongTime')
  const sortOrder = ref<'asc' | 'desc'>('desc')

  // æ“ä½œæ–¹æ³•
  const fetchStatistics = async () => {}
  const fetchWrongAnswers = async (page: number, pageSize: number) => {}
  const addWrongAnswer = async (data: WrongAnswerRecord) => {}
  const updateWrongAnswer = async (id: string, updates: Partial<WrongAnswerRecord>) => {}
  const deleteWrongAnswer = async (id: string) => {}
  const reviewWrongAnswer = async (id: string) => {}
  const batchReviewWrongAnswers = async (ids: string[]) => {}

  // è®¡ç®—å±æ€§
  const filteredWrongAnswers = computed(() => {
    return wrongAnswers.value.filter(wa => {
      // åº”ç”¨æ‰€æœ‰ç­›é€‰æ¡ä»¶
    })
  })

  return {
    wrongAnswers,
    statistics,
    loading,
    filters,
    sortBy,
    sortOrder,
    filteredWrongAnswers,
    fetchStatistics,
    fetchWrongAnswers,
    // ... å…¶ä»–æ–¹æ³•
  }
}

// composables/useWrongAnswersIntegration.ts
export function useWrongAnswersIntegration() {
  // é›†æˆ AI é¢è¯•å’Œé¢˜åº“é”™é¢˜
  const aiWrongAnswers = ref<AIInterviewWrongAnswer[]>([])
  const questionBankWrongAnswers = ref<QuestionBankWrongAnswer[]>([])

  // ä» AI é¢è¯•è·å–é”™é¢˜
  const fetchAIInterviewWrongAnswers = async () => {
    // è°ƒç”¨ AI é¢è¯•å†å² APIï¼Œæå–ç­”é”™çš„é¢˜ç›®
  }

  // ä»é¢˜åº“è·å–é”™é¢˜
  const fetchQuestionBankWrongAnswers = async () => {
    // è°ƒç”¨é¢˜åº“ç»ƒä¹ è®°å½• APIï¼Œæå–ç­”é”™çš„é¢˜ç›®
  }

  // åŒæ­¥åˆ°ç»Ÿä¸€çš„é”™é¢˜é›†
  const syncWrongAnswers = async () => {
    // åˆå¹¶æ¥è‡ªä¸¤ä¸ªæ¥æºçš„é”™é¢˜ï¼Œå»é‡ï¼Œç»Ÿè®¡
  }

  return {
    aiWrongAnswers,
    questionBankWrongAnswers,
    fetchAIInterviewWrongAnswers,
    fetchQuestionBankWrongAnswers,
    syncWrongAnswers
  }
}
```

### 5.2 Home é¡µé¢é›†æˆç¤ºä¾‹

```vue
<template>
  <div class="home-page">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="home-header">
      <h1>å­¦ä¹ ä¸­å¿ƒ</h1>
      <nav class="home-nav">
        <router-link to="/home">é¦–é¡µ</router-link>
        <router-link to="/wrong-answers">é”™é¢˜é›†</router-link>
        <router-link to="/learning-paths">å­¦ä¹ è·¯å¾„</router-link>
      </nav>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="home-main">
      <!-- é”™é¢˜é›†å¡ç‰‡åŒºåŸŸ -->
      <section class="wrong-answers-section">
        <div class="section-header">
          <h2>ğŸ“š é”™é¢˜é›†</h2>
          <router-link to="/wrong-answers" class="view-all">
            æŸ¥çœ‹å…¨éƒ¨ â†’
          </router-link>
        </div>

        <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
        <WrongAnswersStatistics
          v-if="statistics"
          :statistics="statistics"
          @refresh="handleRefreshStatistics"
        />

        <!-- é”™é¢˜åˆ—è¡¨é¢„è§ˆ -->
        <div class="wrong-answers-preview">
          <div class="list-header">
            <div class="filter-controls">
              <el-select v-model="filters.source" placeholder="é”™é¢˜æ¥æº">
                <el-option label="å…¨éƒ¨æ¥æº" value="all" />
                <el-option label="AI é¢è¯•" value="ai_interview" />
                <el-option label="é¢˜åº“ç»ƒä¹ " value="question_bank" />
              </el-select>

              <el-select v-model="sortBy" placeholder="æ’åºæ–¹å¼">
                <el-option label="æœ€æ–°é”™è¯¯" value="lastWrongTime" />
                <el-option label="é”™è¯¯æœ€å¤š" value="wrongCount" />
                <el-option label="æœ€æ—©è®°å½•" value="createdTime" />
              </el-select>
            </div>
          </div>

          <!-- é”™é¢˜å¡ç‰‡åˆ—è¡¨ -->
          <div v-if="wrongAnswersLoading" class="loading">
            <el-skeleton :rows="3" animated />
          </div>
          <div v-else-if="filteredWrongAnswers.length === 0" class="empty">
            <el-empty description="è¿˜æ²¡æœ‰é”™é¢˜ï¼Œç»§ç»­åŠ æ²¹ï¼" />
          </div>
          <div v-else class="wrong-answers-cards">
            <WrongAnswerCard
              v-for="wrongAnswer in filteredWrongAnswers.slice(0, 5)"
              :key="wrongAnswer.id"
              :wrong-answer="wrongAnswer"
              @edit="handleEditWrongAnswer"
              @delete="handleDeleteWrongAnswer"
              @review="handleReviewWrongAnswer"
            />
          </div>
        </div>

        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="quick-actions">
          <el-button type="primary" @click="handleStartReview">
            å¼€å§‹å¤ä¹ 
          </el-button>
          <el-button @click="handleViewAllWrongAnswers">
            æŸ¥çœ‹å…¨éƒ¨é”™é¢˜
          </el-button>
          <el-button @click="handleExportWrongAnswers">
            å¯¼å‡ºé”™é¢˜
          </el-button>
        </div>
      </section>

      <!-- å…¶ä»–é¦–é¡µå†…å®¹ -->
      <section class="other-sections">
        <!-- å­¦ä¹ æ¨è -->
        <!-- AI é¢è¯•å¿«é€Ÿé“¾æ¥ -->
        <!-- é¢˜åº“å¿«é€Ÿé“¾æ¥ -->
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted, computed } from 'vue'
import { useRouter } from 'vue-router'
import WrongAnswersStatistics from '@/components/wrong-answers/WrongAnswersStatistics.vue'
import WrongAnswerCard from '@/components/wrong-answers/WrongAnswerCard.vue'
import { useWrongAnswers } from '@/composables/useWrongAnswers'

const router = useRouter()
const {
  statistics,
  filters,
  sortBy,
  wrongAnswers,
  loading: wrongAnswersLoading,
  filteredWrongAnswers,
  fetchStatistics,
  fetchWrongAnswers,
  deleteWrongAnswer,
  reviewWrongAnswer
} = useWrongAnswers()

onMounted(async () => {
  await fetchStatistics()
  await fetchWrongAnswers(1, 10)
})

// äº‹ä»¶å¤„ç†
const handleRefreshStatistics = async () => {
  await fetchStatistics()
}

const handleEditWrongAnswer = (wrongAnswer) => {
  // æ‰“å¼€ç¼–è¾‘å¯¹è¯æ¡†
}

const handleDeleteWrongAnswer = async (id: string) => {
  await deleteWrongAnswer(id)
  await fetchStatistics()
  await fetchWrongAnswers(1, 10)
}

const handleReviewWrongAnswer = async (id: string) => {
  await reviewWrongAnswer(id)
  await fetchStatistics()
}

const handleStartReview = () => {
  router.push('/wrong-answers/review')
}

const handleViewAllWrongAnswers = () => {
  router.push('/wrong-answers')
}

const handleExportWrongAnswers = async () => {
  // å¯¼å‡ºä¸º PDF æˆ– Excel
}
</script>

<style scoped lang="scss">
.home-page {
  padding: 24px;
  background: #f5f7fa;
}

.wrong-answers-section {
  background: white;
  border-radius: 8px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;

    h2 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: #243058;
    }

    .view-all {
      color: #5c6af0;
      text-decoration: none;
      transition: color 0.3s;

      &:hover {
        color: #3a42c0;
      }
    }
  }
}

.wrong-answers-cards {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.quick-actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #ebeef5;
}
</style>
```

---

## å…­ã€å…³é”®é›†æˆç‚¹

### 6.1 ä¸ AI é¢è¯•çš„é›†æˆ

```typescript
// services/aiInterviewWrongAnswersIntegration.ts
export class AIInterviewWrongAnswersIntegration {
  /**
   * ä» AI é¢è¯•å†å²ä¸­æå–é”™é¢˜
   */
  static async extractWrongAnswersFromAISession(sessionId: string) {
    // 1. è·å– AI é¢è¯•ä¼šè¯æ•°æ®
    const session = await getAIInterviewSession(sessionId)

    // 2. éå†æ‰€æœ‰ç­”é¢˜è®°å½•
    const wrongAnswers: AIInterviewWrongAnswer[] = []

    session.questions.forEach((q, index) => {
      if (!q.isCorrect) {
        wrongAnswers.push({
          id: `wa_ai_${sessionId}_${q.id}`,
          source: 'ai_interview',
          sourceId: sessionId,
          questionId: q.id,
          questionContent: q.content,
          userAnswer: q.userAnswer,
          correctAnswer: q.correctAnswer,
          answerAnalysis: q.analysis,
          wrongCount: 1,
          correctCount: 0,
          lastWrongTime: Date.now(),
          createdTime: Date.now(),
          tags: ['AI é¢è¯•'],
          notes: '',
          reviewedStatus: 'unreviewed',
          metadata: {
            aiSessionId: sessionId,
            aiSessionName: session.name,
            questionSequence: index + 1
          }
        })
      }
    })

    // 3. ä¿å­˜åˆ°åç«¯
    return await Promise.all(
      wrongAnswers.map(wa => saveWrongAnswer(wa))
    )
  }

  /**
   * ç›‘å¬ AI é¢è¯•å®Œæˆäº‹ä»¶ï¼Œè‡ªåŠ¨è®°å½•é”™é¢˜
   */
  static setupAutoRecording() {
    // è®¢é˜… AI é¢è¯•å®Œæˆäº‹ä»¶
    EventBus.on('ai-interview-completed', async (sessionData) => {
      await this.extractWrongAnswersFromAISession(sessionData.sessionId)
    })
  }
}
```

### 6.2 ä¸é¢˜åº“ç»ƒä¹ çš„é›†æˆ

```typescript
// services/questionBankWrongAnswersIntegration.ts
export class QuestionBankWrongAnswersIntegration {
  /**
   * ä»é¢˜åº“ç»ƒä¹ å†å²ä¸­æå–é”™é¢˜
   */
  static async extractWrongAnswersFromPractice(practiceId: string) {
    const practice = await getQuestionBankPractice(practiceId)

    const wrongAnswers: QuestionBankWrongAnswer[] = []

    practice.answers.forEach((answer) => {
      if (!answer.isCorrect) {
        wrongAnswers.push({
          id: `wa_qb_${practiceId}_${answer.questionId}`,
          source: 'question_bank',
          sourceId: answer.questionId,
          questionId: answer.questionId,
          questionContent: answer.question.content,
          userAnswer: answer.userAnswer,
          correctAnswer: answer.question.answer,
          answerAnalysis: answer.question.analysis,
          wrongCount: 1,
          correctCount: 0,
          lastWrongTime: Date.now(),
          createdTime: Date.now(),
          tags: ['é¢˜åº“ç»ƒä¹ '],
          notes: '',
          reviewedStatus: 'unreviewed',
          metadata: {
            bankId: practice.bankId,
            chapterId: answer.question.chapterId,
            examType: practice.examType
          }
        })
      }
    })

    return await Promise.all(
      wrongAnswers.map(wa => saveWrongAnswer(wa))
    )
  }

  /**
   * ç›‘å¬ç»ƒä¹ å®Œæˆäº‹ä»¶
   */
  static setupAutoRecording() {
    EventBus.on('practice-completed', async (practiceData) => {
      await this.extractWrongAnswersFromPractice(practiceData.practiceId)
    })
  }
}
```

---

## ä¸ƒã€å®ç°ä¼˜å…ˆçº§

### Phase 1: åŸºç¡€åŠŸèƒ½ (ç¬¬ 1-2 å‘¨)
- [ ] åç«¯: é”™é¢˜é›† CRUD API
- [ ] å‰ç«¯: Home é¡µé¢é”™é¢˜é›†ç»Ÿè®¡å¡ç‰‡
- [ ] å‰ç«¯: åŸºç¡€é”™é¢˜åˆ—è¡¨ç»„ä»¶
- [ ] é›†æˆ: AI é¢è¯•é”™é¢˜è‡ªåŠ¨è®°å½•

### Phase 2: å¢å¼ºåŠŸèƒ½ (ç¬¬ 3-4 å‘¨)
- [ ] å‰ç«¯: å®Œæ•´çš„é”™é¢˜è¯¦æƒ…é¡µé¢
- [ ] å‰ç«¯: ç­›é€‰ã€æ’åºã€æœç´¢åŠŸèƒ½
- [ ] é›†æˆ: é¢˜åº“ç»ƒä¹ é”™é¢˜è‡ªåŠ¨è®°å½•
- [ ] åŠŸèƒ½: é”™é¢˜å¤ä¹ è®¡åˆ’

### Phase 3: é«˜çº§åŠŸèƒ½ (ç¬¬ 5-6 å‘¨)
- [ ] åŠŸèƒ½: ç›¸ä¼¼é¢˜æ¨èå¼•æ“
- [ ] åŠŸèƒ½: é”™é¢˜åˆ†ææŠ¥å‘Š
- [ ] åŠŸèƒ½: é”™é¢˜å¯¼å‡º (PDF/Excel)
- [ ] åŠŸèƒ½: é”™é¢˜åˆ†äº«å’Œè®¨è®º

---

## å…«ã€æŠ€æœ¯æ ˆå»ºè®®

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **å‰ç«¯** | Vue 3 + TypeScript | UI æ¡†æ¶ |
| | Element Plus | ç»„ä»¶åº“ |
| | Pinia | çŠ¶æ€ç®¡ç† |
| | VueUse | å·¥å…· |
| **åç«¯** | Spring Boot | åº”ç”¨æ¡†æ¶ |
| | Spring Data JPA | ORM |
| | MySQL | ä¸»æ•°æ®åº“ |
| | Redis | ç¼“å­˜ |
| **éƒ¨ç½²** | Docker | å®¹å™¨åŒ– |
| | Nginx | åå‘ä»£ç† |
| | GitHub Actions | CI/CD |

---

## ä¹ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **è™šæ‹Ÿæ»šåŠ¨**: é”™é¢˜åˆ—è¡¨è¶…è¿‡ 100 æ¡æ—¶ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
2. **ç¼“å­˜ç­–ç•¥**: Redis ç¼“å­˜çƒ­ç‚¹ç»Ÿè®¡æ•°æ®
3. **æ‡’åŠ è½½**: é”™é¢˜è¯¦æƒ…æŒ‰éœ€åŠ è½½
4. **åˆ†é¡µ**: åç«¯åˆ†é¡µï¼Œé¿å…ä¸€æ¬¡åŠ è½½è¿‡å¤šæ•°æ®
5. **æœç´¢ä¼˜åŒ–**: ä½¿ç”¨å…¨æ–‡æœç´¢ç´¢å¼•åŠ å¿«æŸ¥è¯¢é€Ÿåº¦

---

## åã€å‚è€ƒèµ„æº

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://v3.vuejs.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/)
- [Spring Boot å®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [é”™é¢˜é›†æœ€ä½³å®è·µ](D:\code7\test3\7.txt)
