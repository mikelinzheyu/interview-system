# ğŸ“¥ å¯¼å…¥ä¿®å¤åçš„ Workflow1 åˆ° Dify

**ä¿®å¤æ–‡ä»¶**: `AIé¢è¯•å®˜-å·¥ä½œæµ1-ç”Ÿæˆé—®é¢˜-FIXED.yml`
**ä¿®å¤æ—¶é—´**: 2025-10-28

---

## ğŸš€ å¿«é€Ÿå¯¼å…¥æ­¥éª¤

### æ–¹å¼ A: é€šè¿‡ Dify UI å¯¼å…¥ (æ¨è)

#### 1. ç™»å½• Dify Dashboard
- è®¿é—®: https://cloud.dify.ai/signin
- ä½¿ç”¨æ‚¨çš„è´¦å·ç™»å½•

#### 2. å¯¼å‡ºå½“å‰ Workflow1
1. æ‰¾åˆ°åº”ç”¨: **"AIé¢è¯•å®˜-å·¥ä½œæµ1-ç”Ÿæˆé—®é¢˜"**
2. ç‚¹å‡»è¿›å…¥ç¼–è¾‘å™¨
3. ç‚¹å‡»å³ä¸Šè§’èœå• (â‹®) â†’ é€‰æ‹© **"Export"** æˆ– **"å¯¼å‡º"**
4. ä¿å­˜å¯¼å‡ºçš„YAMLæ–‡ä»¶ä½œä¸ºå¤‡ä»½

#### 3. ä½¿ç”¨ä¿®å¤åçš„YAMLæ›´æ–°å·¥ä½œæµ
1. ç‚¹å‡»å·¥ä½œæµç¼–è¾‘å™¨å³ä¸Šè§’èœå• (â‹®)
2. é€‰æ‹© **"Import"** æˆ– **"å¯¼å…¥"** (å¦‚æœå¯ç”¨)
3. æˆ–è€…æ‰‹åŠ¨ç¼–è¾‘:
   - æ‰“å¼€ä¿®å¤åçš„ YAML æ–‡ä»¶
   - å¤åˆ¶æ‰€æœ‰å†…å®¹
   - åœ¨ Dify ç¼–è¾‘å™¨ä¸­ç²˜è´´

#### 4. éªŒè¯ä¿®å¤
åœ¨ç¼–è¾‘å™¨ä¸­æŸ¥çœ‹ï¼š
- âœ… `save_questions` èŠ‚ç‚¹çš„è¾“å‡ºå­—æ®µæ˜¯å¦æ­£ç¡®
- âœ… `end_output` èŠ‚ç‚¹çš„è¾“å‡ºæ˜ å°„æ˜¯å¦æ­£ç¡®

#### 5. ä¿å­˜å¹¶å‘å¸ƒ
1. ç‚¹å‡» **"Save"** ä¿å­˜å·¥ä½œæµ
2. ç‚¹å‡» **"Publish"** å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ

---

### æ–¹å¼ B: æ‰‹åŠ¨ç¼–è¾‘å·¥ä½œæµ (è¯¦ç»†æ­¥éª¤)

å¦‚æœå¯¼å…¥é€‰é¡¹ä¸å¯ç”¨ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨ç¼–è¾‘:

#### æ­¥éª¤ 1: ç¼–è¾‘ save_questions èŠ‚ç‚¹

**ä½ç½®**: å·¥ä½œæµå›¾ â†’ "ä¿å­˜é—®é¢˜åˆ—è¡¨" èŠ‚ç‚¹

1. å³é”®ç‚¹å‡»èŠ‚ç‚¹ â†’ ç¼–è¾‘
2. å‘ä¸‹æ»šåŠ¨åˆ° **"Output"** éƒ¨åˆ†
3. åˆ é™¤ä»¥ä¸‹å­—æ®µ:
   - `error` (æ”¹ä¸º `error_message`)
   - `question_count` (æ”¹ä¸º `questions_count`)
   - `questions_json` (åˆ é™¤)

4. ç¡®ä¿è¾“å‡ºåŒ…å«:
   ```
   - error_message (string)
   - job_title (string)
   - questions_count (number)
   - save_status (string)
   - session_id (string)
   ```

5. ç‚¹å‡» **"Confirm"** æˆ– **"å®Œæˆ"**

#### æ­¥éª¤ 2: ç¼–è¾‘ end_output èŠ‚ç‚¹

**ä½ç½®**: å·¥ä½œæµå›¾ â†’ "è¾“å‡ºç»“æœ" èŠ‚ç‚¹

1. ç‚¹å‡»è¯¥èŠ‚ç‚¹è¿›å…¥ç¼–è¾‘
2. ä¿®æ”¹è¾“å‡ºæ˜ å°„:

**åˆ é™¤**:
```
save_questions.questions_json
save_questions.question_count
```

**æ”¹ä¸º**:
```
save_questions.error_message
save_questions.questions_count
```

**æ·»åŠ **:
```
save_questions.save_status
```

3. æœ€ç»ˆè¾“å‡ºåº”è¯¥åŒ…å«5ä¸ªå­—æ®µ:
   - session_id
   - job_title
   - questions_count
   - save_status
   - error_message

#### æ­¥éª¤ 3: ä¿å­˜

1. ç‚¹å‡»å·¥ä½œæµç¼–è¾‘å™¨å³ä¸Šè§’ **"Save"**
2. ç¡®è®¤ä¿å­˜æˆåŠŸ

---

## ğŸ“‚ æ–‡ä»¶ä¿¡æ¯

### ä¿®å¤åçš„æ–‡ä»¶
```
ä½ç½®: /d/code7/interview-system/AIé¢è¯•å®˜-å·¥ä½œæµ1-ç”Ÿæˆé—®é¢˜-FIXED.yml
å¤§å°: 12 KB
ä¿®å¤æ—¶é—´: 2025-10-28
```

### ä¿®å¤å†…å®¹æ±‡æ€»
```
âœ… ä¿®å¤äº† save_questions èŠ‚ç‚¹çš„ 6 ä¸ªè¾“å‡ºå­—æ®µå®šä¹‰
âœ… ä¿®å¤äº† end_output èŠ‚ç‚¹çš„ 5 ä¸ªè¾“å‡ºæ˜ å°„
âœ… åˆ é™¤äº†ä¸å­˜åœ¨çš„å­—æ®µ (questions_json)
âœ… çº æ­£äº†æ‹¼å†™é”™è¯¯ (question_count â†’ questions_count)
âœ… çº æ­£äº†å­—æ®µåç§° (error â†’ error_message)
âœ… æ·»åŠ äº†ç¼ºå¤±çš„å­—æ®µ (save_status)
```

---

## ğŸ§ª éªŒè¯ä¿®å¤æˆåŠŸ

### æµ‹è¯• 1: è¿è¡Œæµ‹è¯•è„šæœ¬
```bash
cd /d/code7/interview-system
node test-workflow1-only.js
```

**é¢„æœŸè¾“å‡º**:
```
âœ… å·¥ä½œæµæ‰§è¡ŒæˆåŠŸï¼

ğŸ“¦ è¾“å‡ºæ•°æ®:
{
  "session_id": "session-1730101234567",
  "job_title": "Python åç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
  "questions_count": 5,
  "save_status": "æˆåŠŸ",
  "error_message": ""
}
```

### æµ‹è¯• 2: Dify ä»ªè¡¨æ¿æµ‹è¯•
1. åœ¨å·¥ä½œæµç¼–è¾‘å™¨ä¸­æ‰¾åˆ° **"Test"** æˆ– **"æµ‹è¯•"** æŒ‰é’®
2. è¾“å…¥æµ‹è¯•å‚æ•°:
   ```json
   {
     "job_title": "Python åç«¯å¼€å‘å·¥ç¨‹å¸ˆ"
   }
   ```
3. ç‚¹å‡» **"Run"** æ‰§è¡Œ
4. æŸ¥çœ‹ç»“æœ - åº”è¯¥æ˜¾ç¤º "Succeeded" å’Œæ‰€æœ‰5ä¸ªè¾“å‡ºå­—æ®µ

---

## ğŸ”„ å¯¹æ¯”ä¿®å¤å‰å

### ä¿®å¤å‰ (é”™è¯¯çš„è¾“å‡ºå®šä¹‰)
```yaml
outputs:
  error:          # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯ error_message
    type: string
  job_title:
    type: string
  question_count: # âŒ é”™è¯¯ï¼šåº”è¯¥æ˜¯ questions_count
    type: number
  questions_json: # âŒ é”™è¯¯ï¼šä¸å­˜åœ¨æ­¤å­—æ®µ
    type: string
  session_id:
    type: string
```

### ä¿®å¤å (æ­£ç¡®çš„è¾“å‡ºå®šä¹‰)
```yaml
outputs:
  error_message:   # âœ… æ­£ç¡®ï¼šä¸Pythonä»£ç åŒ¹é…
    type: string
  job_title:
    type: string
  questions_count: # âœ… æ­£ç¡®ï¼šä¸Pythonä»£ç åŒ¹é…
    type: number
  save_status:     # âœ… æ­£ç¡®ï¼šæ·»åŠ ç¼ºå¤±å­—æ®µ
    type: string
  session_id:
    type: string
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¯¼å…¥åä»ç„¶å‡ºé”™æ€ä¹ˆåŠ?

A: å°è¯•ä»¥ä¸‹æ­¥éª¤:
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ (Ctrl+Shift+Delete)
2. å…³é—­ç¼–è¾‘å™¨é‡æ–°æ‰“å¼€
3. æ£€æŸ¥ save_questions èŠ‚ç‚¹çš„ Python ä»£ç æ˜¯å¦å®Œæ•´
4. æŸ¥çœ‹ Dify çš„è¯¦ç»†æ‰§è¡Œæ—¥å¿—

### Q2: å¦‚ä½•éªŒè¯ä¿®å¤æ˜¯å¦æ­£ç¡®?

A:
1. åœ¨ Dify ä»ªè¡¨æ¿ä¸­æµ‹è¯•å·¥ä½œæµ
2. è¿è¡Œ `node test-workflow1-only.js` éªŒè¯
3. æ£€æŸ¥è¿”å›çš„ JSON æ˜¯å¦åŒ…å«æ‰€æœ‰ 5 ä¸ªå­—æ®µ

### Q3: ä¿®å¤ä¼šå½±å“ç°æœ‰çš„ä¼šè¯å—?

A: ä¸ä¼šã€‚è¿™æ˜¯ä»…ä»…ä¿®å¤è¾“å‡ºå®šä¹‰ï¼Œä¸å½±å“ç°æœ‰çš„æ•°æ®æˆ–ä¼šè¯ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©?

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜:

1. æ£€æŸ¥ `WORKFLOW1_FIX_INSTRUCTIONS.md` è·å–è¯¦ç»†è¯´æ˜
2. æŸ¥çœ‹ `/d/code7/interview-system/WORKFLOW_TEST_ANALYSIS.md` æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
3. è¿è¡Œè¯Šæ–­è„šæœ¬: `node test-workflow1-only.js`

---

**ä¿®å¤å®Œæˆ**: 2025-10-28 âœ…
**çŠ¶æ€**: å·²å‡†å¤‡å¥½å¯¼å…¥å’Œæµ‹è¯•
