# å·¥ä½œæµ3 éƒ¨ç½²æŒ‡å—

## âœ… YAML ä¿®æ”¹å®Œæˆ

### ä¿®æ”¹éªŒè¯
```
âœ… variable: question_id        (æ–°å¢)
âœ… variable: question            (å·²æœ‰)
âœ… variable: standard_answer     (æ–°å¢)
âœ… variable: error               (æ–°å¢)
âœ… variable: comprehensive_evaluation
âœ… variable: overall_score
âœ… variable: session_id
âœ… variable: candidate_answer    (æ–°å¢)
```

ä¿®æ”¹çš„æ–‡ä»¶: **`D:\code7\test5\AIé¢è¯•å®˜-å·¥ä½œæµ3-è¯„åˆ† (4).yml`**

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬1æ­¥: ä¸Šä¼ ä¿®æ”¹åˆ° Dify å¹³å°

#### æ–¹å¼ A: é€šè¿‡ Dify UI ç¼–è¾‘ (æ¨è)

1. ç™»å½• Dify å¹³å°: https://cloud.dify.ai
2. æ‰“å¼€å·¥ä½œæµ3: **"AIé¢è¯•å®˜-å·¥ä½œæµ3-è¯„åˆ†"**
3. ç‚¹å‡»å³ä¸‹è§’çš„"è¾“å‡ºè¯„åˆ†ç»“æœ"èŠ‚ç‚¹
4. ç¡®è®¤è¾“å‡ºå­—æ®µåˆ—è¡¨åŒ…å«ä»¥ä¸‹ 8 ä¸ªå­—æ®µ:
   - [ ] session_id
   - [ ] question_id
   - [ ] candidate_answer
   - [ ] question
   - [ ] standard_answer
   - [ ] comprehensive_evaluation
   - [ ] overall_score
   - [ ] error

5. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
6. ç­‰å¾…ä¿å­˜æˆåŠŸ

#### æ–¹å¼ B: é€šè¿‡ YAML å¯¼å…¥ (é«˜çº§)

1. æ‰“å¼€å·¥ä½œæµ3ç¼–è¾‘é¡µé¢
2. ç‚¹å‡»å³ä¸Šè§’"æ›´å¤š" â†’ "å¯¼å‡º"
3. ä¸‹è½½å½“å‰å·¥ä½œæµçš„ YAML
4. ä½¿ç”¨ä¿®æ”¹åçš„ `AIé¢è¯•å®˜-å·¥ä½œæµ3-è¯„åˆ† (4).yml` æ›¿æ¢
5. ç‚¹å‡»"å¯¼å…¥"æŒ‰é’®ä¸Šä¼ æ–°çš„ YAML
6. éªŒè¯å·¥ä½œæµåŠ è½½æ­£ç¡®

### ç¬¬2æ­¥: é‡æ–°å‘å¸ƒå·¥ä½œæµ

1. æ‰“å¼€å·¥ä½œæµ3ç¼–è¾‘é¡µé¢
2. ç‚¹å‡»å³ä¸Šè§’çš„"å‘å¸ƒ"æŒ‰é’®
3. é€‰æ‹©"æ›´æ–°å·²å‘å¸ƒçš„ç‰ˆæœ¬"æˆ–"å‘å¸ƒä¸ºæ–°ç‰ˆæœ¬"
4. ç­‰å¾…å‘å¸ƒå®Œæˆ (çº¦ 10-30 ç§’)
5. çœ‹åˆ°ç»¿è‰²çš„ âœ… å‘å¸ƒæˆåŠŸæç¤º

### ç¬¬3æ­¥: éªŒè¯éƒ¨ç½²

#### éªŒè¯æ–¹å¼ A: é€šè¿‡ Dify æµ‹è¯•å·¥å…·

1. æ‰“å¼€å·¥ä½œæµ3
2. ç‚¹å‡»å³ä¸Šè§’çš„"è°ƒè¯•"æˆ–"æµ‹è¯•"
3. å¡«å…¥æµ‹è¯•å‚æ•°:
   ```
   session_id: 95f047e7-84fb-437c-9207-5eb1fa70291d
   question_id: 95f047e7-84fb-437c-9207-5eb1fa70291d-q1
   candidate_answer: æˆ‘è®¤ä¸ºPythonçš„è£…é¥°å™¨æ˜¯ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§...
   ```
4. ç‚¹å‡»"è¿è¡Œ"
5. æ£€æŸ¥è¾“å‡ºæ˜¯å¦åŒ…å«æ‰€æœ‰ 8 ä¸ªå­—æ®µï¼Œç‰¹åˆ«æ˜¯ "question" å­—æ®µ

#### éªŒè¯æ–¹å¼ B: é€šè¿‡æµ‹è¯•è„šæœ¬ (è‡ªåŠ¨åŒ–)

```bash
cd D:\code7\interview-system
node test-workflows-with-mcp.js
```

**é¢„æœŸæˆåŠŸè¾“å‡º**:
```
å·¥ä½œæµ1 - ç”Ÿæˆé—®é¢˜: âœ… æˆåŠŸ
å·¥ä½œæµ2 - ç”Ÿæˆç­”æ¡ˆ: âœ… æˆåŠŸ
å·¥ä½œæµ3 - è¯„åˆ†ç³»ç»Ÿ: âœ… æˆåŠŸ

æ€»ä½“æˆåŠŸç‡: 3/3 (100%)
```

**é¢„æœŸå·¥ä½œæµ3çš„è¾“å‡ºåŒ…å«**:
```json
{
  "task_id": "xxx",
  "workflow_run_id": "xxx",
  "data": {
    "status": "succeeded",
    "outputs": {
      "session_id": "95f047e7-84fb-437c-9207-5eb1fa70291d",
      "question_id": "95f047e7-84fb-437c-9207-5eb1fa70291d-q1",
      "candidate_answer": "...",
      "question": "...",
      "standard_answer": "...",
      "comprehensive_evaluation": "...",
      "overall_score": 85,
      "error": ""
    }
  }
}
```

---

## ğŸ“Š å®Œæ•´çš„ç«¯åˆ°ç«¯å·¥ä½œæµ

### å·¥ä½œæµ1: ç”Ÿæˆé—®é¢˜
```
è¾“å…¥: job_title = "Pythonåç«¯å¼€å‘å·¥ç¨‹å¸ˆ"
â†“
ç”Ÿæˆ 5 ä¸ªé«˜è´¨é‡é¢è¯•é—®é¢˜
â†“
è¾“å‡º: session_id, questions
```

### å·¥ä½œæµ2: ç”Ÿæˆæ ‡å‡†ç­”æ¡ˆ
```
è¾“å…¥: session_id, question_id
â†“
åŠ è½½é—®é¢˜ â†’ æœç´¢æ ‡å‡†ç­”æ¡ˆ â†’ ç”Ÿæˆè¯¦ç»†ç­”æ¡ˆ
â†“
è¾“å‡º: generated_answer, save_status
```

### å·¥ä½œæµ3: è¯„åˆ† (ä¿®å¤å)
```
è¾“å…¥: session_id, question_id, candidate_answer
â†“
åŠ è½½æ ‡å‡†ç­”æ¡ˆ â†’ LLM è¯„åˆ† â†’ è§£æè¯„åˆ†ç»“æœ
â†“
è¾“å‡º: âœ… question, standard_answer, comprehensive_evaluation,
       overall_score, error (ç°åœ¨æ‰€æœ‰å­—æ®µéƒ½æœ‰äº†!)
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœä»ç„¶å‡ºç° "Output question is missing" é”™è¯¯

1. **æ£€æŸ¥ç¼“å­˜**:
   - æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   - ç­‰å¾… 5-10 åˆ†é’Ÿè®© CDN æ›´æ–°
   - åœ¨æ–°çš„éšèº«çª—å£ä¸­æµ‹è¯•

2. **æ£€æŸ¥å·¥ä½œæµçŠ¶æ€**:
   - ç¡®è®¤å·¥ä½œæµ3å·²å‘å¸ƒ (ç»¿è‰²å‘å¸ƒæ ‡è®°)
   - æ£€æŸ¥å·¥ä½œæµ3çš„æœ€åä¿®æ”¹æ—¶é—´æ˜¯å¦æœ€è¿‘

3. **æ£€æŸ¥ YAML æ ¼å¼**:
   - æ‰“å¼€å·¥ä½œæµ3ç¼–è¾‘é¡µé¢
   - æ£€æŸ¥è¾“å‡ºèŠ‚ç‚¹æ˜¯å¦æ˜¾ç¤ºæ‰€æœ‰ 8 ä¸ªå­—æ®µ
   - ç¡®ä¿æ²¡æœ‰çº¢è‰²è­¦å‘Šç¬¦å·

4. **é‡æ–°å‘å¸ƒå·¥ä½œæµ**:
   - é€€å‡ºç¼–è¾‘æ¨¡å¼
   - é‡æ–°æ‰“å¼€å·¥ä½œæµ3
   - ç‚¹å‡»å‘å¸ƒæŒ‰é’®å†æ¬¡å‘å¸ƒ
   - ç­‰å¾… 30 ç§’åé‡æ–°æµ‹è¯•

### å¦‚æœè¾“å‡ºèŠ‚ç‚¹ç¼ºå°‘å­—æ®µ

1. ç‚¹å‡»è¾“å‡ºèŠ‚ç‚¹ "è¾“å‡ºè¯„åˆ†ç»“æœ"
2. åœ¨å³ä¾§è¾“å‡ºé…ç½®é¢æ¿ä¸­ï¼Œç‚¹å‡» "+" æŒ‰é’®æ·»åŠ æ–°å­—æ®µ
3. æ‰‹åŠ¨æ·»åŠ ï¼š
   - `question` (from load_answer.question)
   - `standard_answer` (from load_answer.standard_answer)
   - `error` (from load_answer.error)
   - `question_id` (from start.question_id)
   - `candidate_answer` (from start.candidate_answer)
4. ç‚¹å‡»ä¿å­˜

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²å‰:
- [ ] YAML æ–‡ä»¶å·²åœ¨æœ¬åœ°ä¿®æ”¹å®Œæˆ
- [ ] å·²éªŒè¯æ‰€æœ‰ 8 ä¸ªå­—æ®µéƒ½åœ¨ outputs åˆ—è¡¨ä¸­
- [ ] å‡†å¤‡å¥½ä¿®æ”¹åçš„ YAML æ–‡ä»¶è·¯å¾„

åœ¨éƒ¨ç½²æ—¶:
- [ ] å·²ç™»å½• Dify å¹³å°
- [ ] æ‰¾åˆ°å·¥ä½œæµ3å¹¶æ‰“å¼€ç¼–è¾‘é¡µé¢
- [ ] ç¡®è®¤æˆ–æ›´æ–°äº†è¾“å‡ºèŠ‚ç‚¹é…ç½®
- [ ] ç‚¹å‡»äº†å‘å¸ƒæŒ‰é’®
- [ ] ç­‰å¾…å‘å¸ƒå®Œæˆ

åœ¨éƒ¨ç½²å:
- [ ] é€šè¿‡ Dify æµ‹è¯•å·¥å…·éªŒè¯è¾“å‡ºåŒ…å«æ‰€æœ‰å­—æ®µ
- [ ] è¿è¡Œ test-workflows-with-mcp.js è„šæœ¬
- [ ] ç¡®è®¤å·¥ä½œæµ3 è¿”å› HTTP 200 å’Œå®Œæ•´æ•°æ®
- [ ] æ²¡æœ‰ "Output question is missing" é”™è¯¯

---

## ğŸ“ éœ€è¦å¸®åŠ©?

### ç›¸å…³æ–‡ä»¶
- ä¿®æ”¹åçš„ YAML: `D:\code7\test5\AIé¢è¯•å®˜-å·¥ä½œæµ3-è¯„åˆ† (4).yml`
- æµ‹è¯•è„šæœ¬: `D:\code7\interview-system\test-workflows-with-mcp.js`
- ä¿®å¤æ€»ç»“: `D:\code7\interview-system\WORKFLOW3_YAML_FIX_SUMMARY.md`
- ä¿®å¤æŠ¥å‘Š: `D:\code7\interview-system\WORKFLOW3_FIX_REPORT.md`

### Dify æ–‡æ¡£
- å·¥ä½œæµç¼–è¾‘: https://docs.dify.ai/features/workflow
- è¾“å‡ºèŠ‚ç‚¹é…ç½®: https://docs.dify.ai/features/workflow/node/output

---

## â±ï¸ é¢„è®¡æ—¶é—´

- éƒ¨ç½²ä¸Šä¼ : 5 åˆ†é’Ÿ
- å·¥ä½œæµå‘å¸ƒ: 2 åˆ†é’Ÿ
- éªŒè¯æµ‹è¯•: 3 åˆ†é’Ÿ
- **æ€»è®¡**: çº¦ 10 åˆ†é’Ÿ

