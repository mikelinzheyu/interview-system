# ğŸ‰ AIé¢è¯•ç³»ç»Ÿ - Dockerç”Ÿäº§éƒ¨ç½²æˆåŠŸï¼

**éƒ¨ç½²æ—¶é—´ï¼š** 2025-10-26
**ç³»ç»ŸçŠ¶æ€ï¼š** âœ… å®Œå…¨å°±ç»ª
**éƒ¨ç½²æ–¹å¼ï¼š** å…¨Dockerç”Ÿäº§ç¯å¢ƒ

---

## âœ… éƒ¨ç½²éªŒè¯ç»“æœ

### æœåŠ¡è¿è¡ŒçŠ¶æ€

```
âœ“ interview-backend   â†’ UP (healthy)  | Port: 8080 â†’ 3001
âœ“ interview-frontend  â†’ UP (healthy)  | Port: 80,443 â†’ 80
âœ“ interview-redis     â†’ UP (healthy)  | Port: 6379 â†’ 6379
```

### å¥åº·æ£€æŸ¥ç»“æœ

#### åç«¯API
```
è¯·æ±‚ï¼šGET http://localhost:8080/api/health
å“åº”ï¼šHTTP 200 OK
{
  "code": 200,
  "message": "Success",
  "data": {
    "status": "UP",
    "timestamp": "2025-10-26T02:36:00.907Z",
    "version": "1.0.0"
  }
}
âœ“ åç«¯API æ­£å¸¸å·¥ä½œ
```

#### å‰ç«¯åº”ç”¨
```
è¯·æ±‚ï¼šGET http://localhost/health
å“åº”ï¼šHTTP 200 OK
âœ“ å‰ç«¯åº”ç”¨ æ­£å¸¸å·¥ä½œ
```

#### Redisç¼“å­˜
```
è¯·æ±‚ï¼šPING
å“åº”ï¼šPONG
âœ“ Redisç¼“å­˜ æ­£å¸¸å·¥ä½œ
```

---

## ğŸŒ åº”ç”¨è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **å‰ç«¯åº”ç”¨** | http://localhost | Vue3 + Element Plus åº”ç”¨ |
| **å‰ç«¯åº”ç”¨(HTTPS)** | https://localhost | å®‰å…¨è¿æ¥ï¼ˆè‡ªç­¾åè¯ä¹¦ï¼‰ |
| **åç«¯API** | http://localhost:8080/api | REST API åŸºç¡€URL |
| **APIå¥åº·æ£€æŸ¥** | http://localhost:8080/api/health | æœåŠ¡å¥åº·çŠ¶æ€ |
| **Redis** | localhost:6379 | ç¼“å­˜æœåŠ¡è¿æ¥ |

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ç”¨æˆ·è®¿é—® (Browser)               â”‚
â”‚      http://localhost                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ (HTTP/HTTPS 80/443)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  interview-frontend  â”‚
    â”‚  (Nginx + Vue3)      â”‚
    â”‚  Port: 80/443        â”‚
    â”‚  Status: âœ“ Healthy   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ API è¯·æ±‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ interview-backend    â”‚
    â”‚ (Node.js Mock API)   â”‚
    â”‚ Port: 3001           â”‚
    â”‚ Status: âœ“ Healthy    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ ç¼“å­˜è¯·æ±‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ interview-redis      â”‚
    â”‚ (Cache Service)      â”‚
    â”‚ Port: 6379           â”‚
    â”‚ Status: âœ“ Healthy    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker-compose --env-file .env.docker ps
docker-compose --env-file .env.docker logs -f
```

### ç®¡ç†æœåŠ¡
```bash
# åœæ­¢æœåŠ¡
docker-compose --env-file .env.docker stop

# é‡å¯æœåŠ¡
docker-compose --env-file .env.docker restart

# å®Œå…¨åˆ é™¤ï¼ˆæ•°æ®ä¿ç•™ï¼‰
docker-compose --env-file .env.docker down

# å®Œå…¨åˆ é™¤ï¼ˆåŒ…æ‹¬æ•°æ®ï¼‰
docker-compose --env-file .env.docker down -v
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æ—¥å¿—
docker-compose --env-file .env.docker logs -f

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose --env-file .env.docker logs -f backend
docker-compose --env-file .env.docker logs -f frontend

# æŸ¥çœ‹æœ€åNè¡Œ
docker-compose --env-file .env.docker logs --tail=100
```

### è¿›å…¥å®¹å™¨
```bash
# è¿›å…¥åç«¯å®¹å™¨
docker exec -it interview-backend sh

# è¿›å…¥å‰ç«¯å®¹å™¨
docker exec -it interview-frontend sh

# è¿›å…¥Rediså®¹å™¨
docker exec -it interview-redis sh
```

---

## ğŸ“ å…³é”®æ–‡ä»¶å’Œç›®å½•

### é…ç½®æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.env.docker` | ç¯å¢ƒå˜é‡é…ç½® |
| `docker-compose.yml` | Docker Composeå®šä¹‰ |
| `frontend/nginx.conf` | Nginxé…ç½® |
| `nginx/proxy.conf` | åå‘ä»£ç†é…ç½® |

### è¯ä¹¦æ–‡ä»¶
| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `nginx/ssl/cert.pem` | SSLè¯ä¹¦ï¼ˆè‡ªç­¾åï¼‰ |
| `nginx/ssl/key.pem` | SSLç§é’¥ |

### æ—¥å¿—æ–‡ä»¶
| ç›®å½• | å†…å®¹ |
|------|------|
| `logs/backend/` | åç«¯åº”ç”¨æ—¥å¿— |
| `logs/frontend/` | Nginxè®¿é—®æ—¥å¿— |
| `logs/redis/` | Redisæ—¥å¿— |

### æ•°æ®ç›®å½•
| ç›®å½• | å†…å®¹ |
|------|------|
| `data/redis/` | RedisæŒä¹…åŒ–æ•°æ® |
| `backend/uploads/` | æ–‡ä»¶ä¸Šä¼ ç›®å½• |

---

## âš™ï¸ éƒ¨ç½²é…ç½®ä¿¡æ¯

### Dockeré•œåƒä¿¡æ¯
```
åç«¯é•œåƒï¼šinterview-system/backend:latest
  - åŸºç¡€é•œåƒï¼šnode:18-alpine
  - å¤§å°ï¼š~153MB
  - åº”ç”¨ç«¯å£ï¼š3001
  - å¯åŠ¨å‘½ä»¤ï¼šnode mock-server.js

å‰ç«¯é•œåƒï¼šinterview-system/frontend:latest
  - æ„å»ºé˜¶æ®µï¼šnode:18-alpine
  - ç”Ÿäº§é˜¶æ®µï¼šnginx:alpine
  - å¤§å°ï¼š~56MB
  - åº”ç”¨ç«¯å£ï¼š80/443
  - å¯åŠ¨å‘½ä»¤ï¼šnginx -g "daemon off;"

Redisé•œåƒï¼šredis:7-alpine
  - å¤§å°ï¼š~8MB
  - åº”ç”¨ç«¯å£ï¼š6379
```

### ç½‘ç»œé…ç½®
```
ç½‘ç»œåç§°ï¼šinterview-network (Bridge)
ç½‘ç»œé©±åŠ¨ï¼šbridge
å®¹å™¨è¿æ¥ï¼š
  - interview-backend (3001)
  - interview-frontend (80/443)
  - interview-redis (6379)
```

### å·æŒ‚è½½
```
redis_data â†’ Redis /data ï¼ˆæŒä¹…åŒ–æ•°æ®ï¼‰
logs/backend â†’ /app/logs ï¼ˆåç«¯æ—¥å¿—ï¼‰
logs/frontend â†’ /var/log/nginx ï¼ˆNginxæ—¥å¿—ï¼‰
logs/redis â†’ /var/log/redis ï¼ˆRedisæ—¥å¿—ï¼‰
```

---

## ğŸ”’ å®‰å…¨é…ç½®

### å·²å¯ç”¨çš„å®‰å…¨ç‰¹æ€§

âœ“ **SSL/TLSæ”¯æŒ**
  - HTTPSç«¯å£ï¼š443
  - è‡ªç­¾åè¯ä¹¦å·²ç”Ÿæˆ
  - ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨çœŸå®è¯ä¹¦

âœ“ **å®‰å…¨å¤´è®¾ç½®**
  - X-Frame-Options: SAMEORIGIN
  - X-Content-Type-Options: nosniff
  - X-XSS-Protection: 1; mode=block
  - Referrer-Policy: strict-origin-when-cross-origin

âœ“ **é€Ÿç‡é™åˆ¶**
  - ä¸€èˆ¬è¯·æ±‚ï¼š500 req/s
  - APIè¯·æ±‚ï¼š100 req/s

âœ“ **Gzipå‹ç¼©**
  - è‡ªåŠ¨å¯ç”¨ï¼Œæœ€å°1024å­—èŠ‚
  - å‹ç¼©çº§åˆ«ï¼š6

âœ“ **é™æ€èµ„æºç¼“å­˜**
  - é•¿æœŸç¼“å­˜ï¼ˆ1å¹´ï¼‰
  - é€‚å½“çš„Cache-Controlå¤´

### å®‰å…¨å»ºè®®

âš ï¸ **ç”Ÿäº§ç¯å¢ƒå¿…åš**
- [ ] ä¿®æ”¹`.env`ä¸­çš„`JWT_SECRET`ä¸ºå¼ºå¯†é’¥
- [ ] é…ç½®çœŸå®çš„SSLè¯ä¹¦ï¼ˆæ›¿æ¢è‡ªç­¾åï¼‰
- [ ] è®¾ç½®Rediså¯†ç 
- [ ] å¯ç”¨é˜²ç«å¢™è§„åˆ™
- [ ] é™åˆ¶å®¹å™¨èµ„æºä½¿ç”¨
- [ ] é…ç½®æ—¥å¿—èšåˆå’Œç›‘æ§
- [ ] å®šæœŸå¤‡ä»½æ•°æ®
- [ ] å®šæœŸæ›´æ–°é•œåƒ

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å½“å‰é…ç½®
```
CPUé™åˆ¶ï¼šæ— é™åˆ¶ï¼ˆå¯é…ç½®ï¼‰
å†…å­˜é™åˆ¶ï¼šæ— é™åˆ¶ï¼ˆå¯é…ç½®ï¼‰
ç£ç›˜ä½¿ç”¨ï¼š~200MBï¼ˆåº”ç”¨ + é•œåƒï¼‰
æ—¥å¿—å¤§å°ï¼š10MB/æ–‡ä»¶ï¼Œæœ€å¤š3æ–‡ä»¶è½®è½¬
```

### é¢„æœŸæ€§èƒ½
```
å‰ç«¯åŠ è½½æ—¶é—´ï¼š< 2ç§’ï¼ˆé¦–æ¬¡ï¼‰
APIå“åº”æ—¶é—´ï¼š< 100msï¼ˆç¼“å­˜ï¼‰
å¹¶å‘è¿æ¥ï¼š~500
ååé‡ï¼š1000+ req/s
```

### ç³»ç»Ÿèµ„æºä½¿ç”¨
```
Dockerå®¹å™¨å†…å­˜ï¼š~500MBï¼ˆè¿è¡Œä¸­ï¼‰
Dockerå®¹å™¨CPUï¼š< 1%ï¼ˆç©ºé—²ï¼‰
ç£ç›˜ç©ºé—´ï¼š20GB+ï¼ˆæ¨èï¼‰
```

---

## ğŸ”„ å¸¸è§æ“ä½œ

### æŸ¥çœ‹å®æ—¶ç›‘æ§
```bash
docker stats
```

### å¯¼å‡ºæ—¥å¿—
```bash
docker-compose --env-file .env.docker logs > system.log
```

### å¤‡ä»½æ•°æ®
```bash
docker cp interview-redis:/data ./redis_backup_$(date +%Y%m%d)
```

### æ¸…ç†èµ„æº
```bash
docker system prune -a
docker volume prune
```

---

## ğŸ“ æ•…éšœæ’æŸ¥

### å¦‚æœæœåŠ¡æ— æ³•è®¿é—®

**æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š**
```bash
docker-compose --env-file .env.docker ps
```

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
docker-compose --env-file .env.docker logs
```

**æµ‹è¯•è¿æ¥ï¼š**
```bash
curl http://localhost:8080/api/health
curl http://localhost/health
```

### å¦‚æœæ€§èƒ½ä¸‹é™

**æ£€æŸ¥èµ„æºä½¿ç”¨ï¼š**
```bash
docker stats
```

**æ£€æŸ¥æ—¥å¿—å¤§å°ï¼š**
```bash
du -sh logs/*
```

**æ¸…ç†æ—¥å¿—ï¼š**
```bash
truncate -s 0 logs/*/*.log
```

### å¦‚æœæ•°æ®ä¸¢å¤±

**æ£€æŸ¥å·çŠ¶æ€ï¼š**
```bash
docker volume ls | grep interview
```

**æ¢å¤å¤‡ä»½ï¼š**
```bash
docker cp redis_backup_20251026/data interview-redis:/
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³ï¼ˆéƒ¨ç½²åï¼‰
- âœ“ è®¿é—®åº”ç”¨ç¡®è®¤å¯ç”¨
- âœ“ è¿›è¡ŒåŠŸèƒ½æµ‹è¯•
- âœ“ éªŒè¯APIç«¯ç‚¹

### çŸ­æœŸï¼ˆ1å°æ—¶ï¼‰
- [ ] é…ç½®åŸŸåè§£æ
- [ ] é…ç½®çœŸå®SSLè¯ä¹¦
- [ ] è°ƒæ•´JWTå¯†é’¥
- [ ] ä¿®æ”¹Rediså¯†ç 

### ä¸­æœŸï¼ˆ1å¤©ï¼‰
- [ ] è®¾ç½®ç›‘æ§å‘Šè­¦
- [ ] é…ç½®æ—¥å¿—èšåˆ
- [ ] åˆ¶å®šå¤‡ä»½ç­–ç•¥
- [ ] æ€§èƒ½è°ƒä¼˜

### é•¿æœŸï¼ˆ1å‘¨ï¼‰
- [ ] è´Ÿè½½æµ‹è¯•
- [ ] å®‰å…¨å®¡è®¡
- [ ] å®¹é‡è§„åˆ’
- [ ] ç¾éš¾æ¢å¤æµ‹è¯•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `DOCKER_PRODUCTION_DEPLOYMENT.md` | å®Œæ•´éƒ¨ç½²æŒ‡å— |
| `DEPLOY_START_GUIDE.md` | å¿«é€Ÿå¯åŠ¨æŒ‡å— |
| `DEPLOYMENT_QUICK_START.md` | 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨ |
| `PRODUCTION_DEPLOYMENT_SUMMARY.md` | éƒ¨ç½²æ€»ç»“ |
| `QUICK-REFERENCE.md` | å¸¸ç”¨å‘½ä»¤å‚è€ƒ |
| `DOCKER-TROUBLESHOOTING.md` | æ•…éšœæ’æŸ¥æŒ‡å— |

---

## âœ¨ éƒ¨ç½²æ‘˜è¦

| é¡¹ç›® | çŠ¶æ€ |
|------|------|
| **Dockerå®‰è£…** | âœ… å®Œæˆ |
| **ç¯å¢ƒé…ç½®** | âœ… å®Œæˆ |
| **é•œåƒæ„å»º** | âœ… å®Œæˆ |
| **SSLè¯ä¹¦** | âœ… å®Œæˆ |
| **æœåŠ¡å¯åŠ¨** | âœ… å®Œæˆ |
| **å¥åº·æ£€æŸ¥** | âœ… å…¨éƒ¨é€šè¿‡ |
| **åº”ç”¨å¯è®¿é—®** | âœ… æ˜¯ |

---

## ğŸ‰ æ­å–œï¼

æ‚¨çš„AIé¢è¯•ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§Dockerç¯å¢ƒï¼

### ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. **è®¿é—®åº”ç”¨ï¼š** http://localhost
2. **ä½¿ç”¨APIï¼š** http://localhost:8080/api
3. **ç®¡ç†æœåŠ¡ï¼š** ä½¿ç”¨Dockerå‘½ä»¤
4. **ç›‘æ§çŠ¶æ€ï¼š** æŸ¥çœ‹å®¹å™¨æ—¥å¿—
5. **æ‰©å±•åŠŸèƒ½ï¼š** ä¿®æ”¹ä»£ç å¹¶é‡å»ºé•œåƒ

### è®°ä½ï¼š

- ğŸ” **å®‰å…¨**ï¼šå®šæœŸæ›´æ–°å¯†é’¥å’Œè¯ä¹¦
- ğŸ“Š **ç›‘æ§**ï¼šè®¾ç½®æ—¥å¿—èšåˆå’Œå‘Šè­¦
- ğŸ’¾ **å¤‡ä»½**ï¼šå®šæœŸå¤‡ä»½å…³é”®æ•°æ®
- ğŸ”„ **æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°Dockeré•œåƒ

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€

---

**éƒ¨ç½²å®Œæˆæ—¥æœŸï¼š** 2025-10-26
**éƒ¨ç½²æ–¹å¼ï¼š** å…¨Dockerç”Ÿäº§ç¯å¢ƒ
**ç³»ç»ŸçŠ¶æ€ï¼š** æ­£å¸¸è¿è¡Œ âœ…
