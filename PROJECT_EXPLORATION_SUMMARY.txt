é¡¹ç›®ç»“æ„æ¢ç´¢æ€»ç»“

=== 1. é¡¹ç›®æ•´ä½“æ¶æ„ ===

å‰ç«¯ï¼ˆVue 3ï¼‰:
  /frontend/src/
  â”œâ”€â”€ views/community/          # ç¤¾åŒºè®ºå›é¡µé¢
  â”‚   â”œâ”€â”€ ForumList.vue        # è®ºå›æ¿å—åˆ—è¡¨
  â”‚   â”œâ”€â”€ PostList.vue         # å¸–å­åˆ—è¡¨ï¼ˆæŒ‰æ¿å—/æœç´¢ï¼‰
  â”‚   â”œâ”€â”€ PostDetail.vue       # å¸–å­è¯¦æƒ…é¡µ
  â”‚   â”œâ”€â”€ CreatePost.vue       # å‘å¸ƒæ–°å¸–é¡µ
  â”‚   â”œâ”€â”€ FollowList.vue       # å…³æ³¨åˆ—è¡¨
  â”‚   â”œâ”€â”€ Leaderboard.vue      # æ’è¡Œæ¦œ
  â”‚   â””â”€â”€ components/          # å­ç»„ä»¶
  â”‚       â”œâ”€â”€ PostCard.vue     # å¸–å­å¡ç‰‡ï¼ˆ509è¡Œï¼‰
  â”‚       â”œâ”€â”€ CommentForm.vue  # è¯„è®ºè¡¨å•
  â”‚       â”œâ”€â”€ CommentItem.vue  # è¯„è®ºé¡¹
  â”‚       â”œâ”€â”€ CommentList.vue  # è¯„è®ºåˆ—è¡¨
  â”‚       â”œâ”€â”€ NotificationCenter.vue  # é€šçŸ¥ä¸­å¿ƒ
  â”‚       â””â”€â”€ NotificationItem.vue    # é€šçŸ¥é¡¹
  â”œâ”€â”€ api/                      # APIæ¥å£å±‚
  â”‚   â”œâ”€â”€ community.js         # åŸºç¡€APIå‡½æ•°
  â”‚   â”œâ”€â”€ communityMock.js     # Mockæ•°æ®ç”Ÿæˆï¼ˆ604è¡Œï¼‰
  â”‚   â””â”€â”€ communityWithCache.js # é«˜çº§APIï¼ˆç¼“å­˜ã€é‡è¯•ï¼‰
  â”œâ”€â”€ composables/              # ç»„åˆå¼å‡½æ•°
  â”‚   â”œâ”€â”€ usePostList.js       # å¸–å­åˆ—è¡¨é€»è¾‘ï¼ˆ217è¡Œï¼‰
  â”‚   â””â”€â”€ usePostActions.js    # å¸–å­æ“ä½œé€»è¾‘ï¼ˆ220è¡Œï¼‰
  â””â”€â”€ data/                     # é™æ€æ•°æ®
      â”œâ”€â”€ disciplines-complete.json
      â”œâ”€â”€ mock-domains.json
      â””â”€â”€ university-presets/

åç«¯ï¼ˆNode.js Mockï¼‰:
  /backend/
  â”œâ”€â”€ mock-server.js           # å®Œæ•´MockæœåŠ¡å™¨ï¼ˆ292KBï¼‰
  â”œâ”€â”€ controllers/             # æ§åˆ¶å™¨
  â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
  â”œâ”€â”€ routes/                  # è·¯ç”±
  â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶
  â””â”€â”€ uploads/                 # æ–‡ä»¶ä¸Šä¼ ç›®å½•

=== 2. Community é¡µé¢è·¯ç”±é…ç½® ===

/community                      # ä¸»è·¯ç”±å…¥å£ â†’ CommunityHub.vue
/community/forums              # è®ºå›æ¿å—åˆ—è¡¨é¡µ
/community/forums/:slug        # ç‰¹å®šæ¿å—çš„å¸–å­åˆ—è¡¨
/community/posts               # æ‰€æœ‰å¸–å­åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ï¼‰
/community/posts/:id           # å¸–å­è¯¦æƒ…é¡µ
/community/create-post         # å‘å¸ƒæ–°å¸–é¡µ
/community/follow-list         # å…³æ³¨åˆ—è¡¨é¡µ
/community/leaderboard         # æ’è¡Œæ¦œé¡µ

=== 3. Post æ•°æ®ç»“æ„ ===

æ ¸å¿ƒå­—æ®µ:
  {
    id: 1                          # å¸–å­ID
    forumId: 1                     # æ‰€å±æ¿å—ID
    forumSlug: 'frontend'          # æ¿å—slugï¼ˆè·¯ç”±å‚æ•°ï¼‰
    
    author: {                      # ä½œè€…ä¿¡æ¯
      userId: 'user1'
      name: 'å¼ ä¸‰'
      avatar: 'https://...'
    }
    
    title: 'å¸–å­æ ‡é¢˜'               # å¸–å­æ ‡é¢˜
    content: 'å¸–å­å†…å®¹...'          # å¸–å­å†…å®¹ï¼ˆæ”¯æŒMarkdownï¼‰
    tags: ['Vue3', 'å“åº”å¼']       # æ ‡ç­¾æ•°ç»„
    
    solved: false                  # æ˜¯å¦å·²è§£å†³
    pinned: false                  # æ˜¯å¦ç½®é¡¶
    likes: 15                      # ç‚¹èµæ•°
    viewCount: 120                 # æµè§ˆæ•°
    commentCount: 3                # è¯„è®ºæ•°
    comments: [...]                # è¯„è®ºæ•°ç»„ï¼ˆè¯¦æƒ…é¡µï¼‰
    
    aiReviewScore: 0.95            # AIå®¡æ ¸å¾—åˆ†
    createdAt: '2024-11-10T...'   # åˆ›å»ºæ—¶é—´
    updatedAt: '2024-11-11T...'   # æ›´æ–°æ—¶é—´
  }

=== 4. è®ºå›æ¿å—ï¼ˆForumï¼‰æ•°æ®ç»“æ„ ===

  {
    id: 1                          # æ¿å—ID
    name: 'å‰ç«¯æŠ€æœ¯'               # æ¿å—åç§°
    slug: 'frontend'               # slugï¼ˆè·¯ç”±å‚æ•°ï¼‰
    description: 'è®¨è®ºå†…å®¹...'     # æè¿°
    icon: 'ğŸŒ'                     # emojiå›¾æ ‡
    postCount: 45                  # å¸–å­æ•°é‡
    active: true                   # æ˜¯å¦æ´»è·ƒ
    category: 'development'        # åˆ†ç±»
    sortOrder: 1                   # æ’åºåºå·
  }

å‰ç«¯ç°æœ‰çš„Mockæ¿å—:
  1. å‰ç«¯æŠ€æœ¯ (frontend) - 45ç¯‡
  2. åç«¯å¼€å‘ (backend) - 38ç¯‡
  3. æ•°æ®åº“ä¸å­˜å‚¨ (database) - 28ç¯‡
  4. é¡¹ç›®åˆ†äº« (projects) - 32ç¯‡
  5. èŒä¸šå‘å±• (career) - 25ç¯‡
  6. å­¦ä¹ èµ„æº (resources) - 42ç¯‡

=== 5. Mock æ•°æ®å­˜æ”¾ä½ç½® ===

å‰ç«¯Mockæ•°æ®æ–‡ä»¶:
  ä½ç½®: /frontend/src/api/communityMock.jsï¼ˆ604è¡Œï¼‰
  
  åŒ…å«:
  - mockForums[]        # 6ä¸ªè®ºå›æ¿å—å®šä¹‰
  - mockPosts[]         # 30+æ¡å¸–å­ç¤ºä¾‹æ•°æ®
  - users[]             # 12ä¸ªç”¨æˆ·æ•°æ®
  - generateMockPosts(params)    # ç”Ÿæˆå¸–å­åˆ—è¡¨ï¼ˆæ”¯æŒæœç´¢ã€æ’åºã€åˆ†é¡µï¼‰
  - generateMockForums()         # è¿”å›è®ºå›åˆ—è¡¨
  - generateMockHotTags()        # ç”Ÿæˆçƒ­é—¨æ ‡ç­¾
  - getPostDetailMock(id)        # è·å–å•ä¸ªå¸–å­è¯¦æƒ…

åç«¯Mockæ•°æ®:
  ä½ç½®: /backend/mock-server.jsï¼ˆç¬¬1511-1800è¡Œï¼‰
  
  åŒ…å«:
  - forums[]            # 5ä¸ªè®ºå›æ¿å—
  - posts[]             # 5ä¸ªå¸–å­
  - comments[]          # è¯„è®ºç¤ºä¾‹
  - å®Œæ•´çš„REST APIå®ç°

=== 6. API æ¥å£æµç¨‹ ===

è°ƒç”¨é“¾è·¯:
  ç»„ä»¶ï¼ˆPostList.vueç­‰ï¼‰
    â†“
  Composableï¼ˆusePostListï¼‰
    â†“
  communityAPIï¼ˆcommunityWithCache.jsï¼‰
    â”œâ”€ æ£€æŸ¥ç¼“å­˜ (Mapç»“æ„)
    â”œâ”€ æ£€æŸ¥Mockæ¨¡å¼
    â”œâ”€ è°ƒç”¨community.jsåŸºç¡€API
    â””â”€ é™çº§åˆ°Mockæ•°æ®ï¼ˆå¦‚æœAPIå¤±è´¥ï¼‰
    
ä¸»è¦APIç«¯ç‚¹:
  GET /api/community/forums
  GET /api/community/forums/:slug/posts
  GET /api/community/posts?page=1&pageSize=20&sortBy=latest
  GET /api/community/posts/:id
  POST /api/community/posts
  PUT /api/community/posts/:id
  DELETE /api/community/posts/:id
  POST /api/community/posts/:id/like
  POST /api/community/posts/:id/comments
  GET /api/community/tags/hot

=== 7. Composables åŠŸèƒ½ ===

usePostList.jsï¼ˆ217è¡Œï¼‰:
  çŠ¶æ€: posts, loading, currentPage, pageSize, total, sortBy, searchKeyword
  æ–¹æ³•: fetchPosts(), handleSearch(), handleSortChange(), handlePageChange()
        handlePageSizeChange(), clearSearch(), refreshPosts(), updatePost(), removePost()

usePostActions.jsï¼ˆ220è¡Œï¼‰:
  æ–¹æ³•: toggleLikePost()          # ç‚¹èµ/å–æ¶ˆç‚¹èµï¼ˆå«ä¹è§‚æ›´æ–°ï¼‰
        toggleLikeComment()       # ç‚¹èµè¯„è®º
        isPostLiked()             # æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ
        canEditPost()             # æƒé™æ£€æŸ¥
        canDeletePost()           # æƒé™æ£€æŸ¥
        deletePost()              # åˆ é™¤å¸–å­
        reportContent()           # ä¸¾æŠ¥å†…å®¹

=== 8. Mock æ•°æ®å¼€å…³æ–¹å¼ ===

é»˜è®¤é…ç½®:
  /frontend/src/api/communityWithCache.js ç¬¬32è¡Œ
  useMockData: import.meta.env.VITE_USE_MOCK_DATA !== 'false'  # é»˜è®¤ä½¿ç”¨Mock
  
ç¯å¢ƒå˜é‡é…ç½®:
  .env æˆ– .env.production
  VITE_USE_MOCK_DATA=true   # ä½¿ç”¨Mockï¼ˆé»˜è®¤ï¼‰
  VITE_USE_MOCK_DATA=false  # ä½¿ç”¨çœŸå®API
  
è¿è¡Œæ—¶åˆ‡æ¢:
  import communityAPI from '@/api/communityWithCache'
  communityAPI.setUseMockData(true)   # å¯ç”¨Mock
  communityAPI.setUseMockData(false)  # ç¦ç”¨Mock
  communityAPI.isUsingMockData()      # æ£€æŸ¥çŠ¶æ€

=== 9. ç¼“å­˜ç­–ç•¥ ===

ç¼“å­˜æ—¶é—´é…ç½®ï¼ˆCACHE_TIMEï¼‰:
  FORUMS: 10åˆ†é’Ÿ            # è®ºå›åˆ—è¡¨ï¼ˆå˜åŒ–ä¸é¢‘ç¹ï¼‰
  POSTS: 3åˆ†é’Ÿ              # å¸–å­åˆ—è¡¨ï¼ˆéœ€è¦å¿«é€Ÿæ›´æ–°ï¼‰
  POST_DETAIL: 5åˆ†é’Ÿ        # å¸–å­è¯¦æƒ…
  TAGS: 30åˆ†é’Ÿ              # çƒ­é—¨æ ‡ç­¾
  STATS: 1åˆ†é’Ÿ              # ç»Ÿè®¡æ•°æ®ï¼ˆæœ€é¢‘ç¹ï¼‰

ç¼“å­˜å®ç°:
  - ä½¿ç”¨ Map ç»“æ„å­˜å‚¨
  - å¸¦æ—¶é—´æˆ³çš„è¿‡æœŸæœºåˆ¶
  - è¯·æ±‚å»é‡ï¼ˆpending Map é¿å…å¹¶å‘è¯·æ±‚ï¼‰
  - è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰

=== 10. ç»„ä»¶ç»Ÿè®¡ ===

é¡µé¢ç»„ä»¶:
  - ForumList.vue:     ~200è¡Œ    # æ¿å—åˆ—è¡¨
  - PostList.vue:      212è¡Œ     # å¸–å­åˆ—è¡¨ï¼ˆæœç´¢ã€æ’åºã€åˆ†é¡µï¼‰
  - PostDetail.vue:    368è¡Œ     # å¸–å­è¯¦æƒ…
  - CreatePost.vue:    ~280è¡Œ    # å‘å¸ƒæ–°å¸–
  - FollowList.vue:    ~280è¡Œ    # å…³æ³¨åˆ—è¡¨
  - Leaderboard.vue:   ~300è¡Œ    # æ’è¡Œæ¦œ

å­ç»„ä»¶:
  - PostCard.vue:      509è¡Œ     # å¸–å­å¡ç‰‡ï¼ˆå«å¤šç§æ“ä½œï¼‰
  - CommentForm.vue:   ~100è¡Œ    # è¯„è®ºè¡¨å•
  - CommentItem.vue:   ~80è¡Œ     # å•æ¡è¯„è®º
  - CommentList.vue:   ~100è¡Œ    # è¯„è®ºåˆ—è¡¨
  - NotificationCenter.vue: å¤æ‚ç»„ä»¶
  - NotificationItem.vue:   å­ç»„ä»¶

=== 11. å…³é”®ç‰¹æ€§ ===

æœç´¢åŠŸèƒ½:
  - æ”¯æŒå…³é”®å­—æœç´¢ï¼ˆæ ‡é¢˜ã€å†…å®¹ï¼‰
  - æ”¯æŒæ ‡ç­¾è¿‡æ»¤
  - é˜²æŠ–æœç´¢è¾“å…¥
  - æœç´¢ç»“æœè‡ªåŠ¨åˆ†é¡µ

æ’åºåŠŸèƒ½:
  - æœ€æ–°ï¼ˆæŒ‰åˆ›å»ºæ—¶é—´é™åºï¼‰
  - æœ€çƒ­ï¼ˆæŒ‰æµè§ˆæ•°+ç‚¹èµæ•°ï¼‰
  - æœ€å¤šç‚¹èµï¼ˆæŒ‰ç‚¹èµæ•°é™åºï¼‰

åˆ†é¡µåŠŸèƒ½:
  - æ”¯æŒ10/20/50æ¡æ¯é¡µ
  - æ€»æ•°ç»Ÿè®¡ï¼ˆæ˜¾ç¤º X-Y ç¯‡ï¼‰
  - è·³è½¬é¡µç 

ç‚¹èµåŠŸèƒ½:
  - ä¹è§‚æ›´æ–°ï¼ˆå³æ—¶åé¦ˆï¼‰
  - è¯·æ±‚å¤±è´¥è‡ªåŠ¨å›æ»š
  - ç‚¹èµæ•°å®æ—¶æ›´æ–°

æƒé™æ§åˆ¶:
  - ç¼–è¾‘ï¼šä»…ä½œè€…æˆ–ç®¡ç†å‘˜
  - åˆ é™¤ï¼šä»…ä½œè€…æˆ–ç®¡ç†å‘˜
  - å‘è¡¨è¯„è®ºï¼šå·²ç™»å½•ç”¨æˆ·

ç¤¾äº¤åŠŸèƒ½:
  - ä¸¾æŠ¥å¸–å­/è¯„è®º
  - åˆ†äº«å¸–å­ï¼ˆå¤åˆ¶é“¾æ¥æˆ–Web Share APIï¼‰
  - æ”¶è—å¸–å­
  - å…³æ³¨ç”¨æˆ·

=== 12. åç«¯ Mock æœåŠ¡å™¨ ===

ä½ç½®: /backend/mock-server.jsï¼ˆ292KB å¤§æ–‡ä»¶ï¼‰

ç‰¹ç‚¹:
  - å®Œæ•´çš„ExpressæœåŠ¡å™¨
  - æ”¯æŒæ‰€æœ‰ç¤¾åŒºCRUDæ“ä½œ
  - WebSocket å®æ—¶é€šä¿¡
  - æ–‡ä»¶ä¸Šä¼ å¤„ç†
  - è¯·æ±‚ç¼“å­˜æœºåˆ¶
  - å®æ—¶æ—¥å¿—è¾“å‡º

å¯åŠ¨:
  cd backend
  npm install
  node mock-server.js
  
è®¿é—®: http://localhost:3001/

=== 13. å¿«é€Ÿå‚è€ƒ ===

æŸ¥çœ‹å¸–å­åˆ—è¡¨æµç¨‹:
  1. è®¿é—® /community/posts
  2. PostList.vue åŠ è½½
  3. usePostList() åˆå§‹åŒ–
  4. fetchPosts() è°ƒç”¨ communityAPI.getPosts()
  5. communityWithCache æ£€æŸ¥ç¼“å­˜ â†’ è°ƒç”¨Mockæˆ–API
  6. è¿”å›æ•°æ®æ¸²æŸ“ PostCard æ•°ç»„

ä¿®æ”¹Mockæ•°æ®:
  1. ç¼–è¾‘ /frontend/src/api/communityMock.js
  2. ä¿®æ”¹ mockForums[] æˆ– mockPosts[]
  3. åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ

æ·»åŠ æ–°API:
  1. åœ¨ community.js å®šä¹‰åŸºç¡€è°ƒç”¨
  2. åœ¨ communityWithCache.js æ·»åŠ ç¼“å­˜é€»è¾‘
  3. åœ¨ communityMock.js æä¾›Mockæ•°æ®
  4. åœ¨ backend/mock-server.js å®ç°æœåŠ¡ç«¯

=== 14. é‡è¦æ–‡ä»¶è·¯å¾„ ===

/frontend/src/api/communityWithCache.js         # æ ¸å¿ƒAPI
/frontend/src/api/communityMock.js             # Mockæ•°æ®ï¼ˆ604è¡Œï¼‰
/frontend/src/composables/usePostList.js       # åˆ—è¡¨é€»è¾‘ï¼ˆ217è¡Œï¼‰
/frontend/src/composables/usePostActions.js    # æ“ä½œé€»è¾‘ï¼ˆ220è¡Œï¼‰
/frontend/src/views/community/PostList.vue     # åˆ—è¡¨é¡µï¼ˆ212è¡Œï¼‰
/frontend/src/views/community/PostDetail.vue   # è¯¦æƒ…é¡µï¼ˆ368è¡Œï¼‰
/frontend/src/views/community/components/PostCard.vue  # å¡ç‰‡ï¼ˆ509è¡Œï¼‰
/frontend/src/router/index.js                  # è·¯ç”±é…ç½®ï¼ˆç¬¬193-287è¡Œï¼‰
/backend/mock-server.js                        # åç«¯Mockï¼ˆ292KBï¼‰

